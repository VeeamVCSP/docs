{"0": {
    "doc": "10 Licensing",
    "title": "Licensing",
    "content": "License Reporting . Either manually or automated, via PowerShell or REST, is a satisfactory method for gathering monthly license reporting data. The VCSP Rental Usage Reporting Guide details the suggested method for gathering your monthly license usage data: . https://helpcenter.veeam.com/docs/vcsp/refguide/about.html . Per Tenant License Reporting . We recommend using the License Overview report configured with a particular month’s dates to review consumed license data. This report is detailed in the below referenced Veeam documentation: . | https://helpcenter.veeam.com/docs/vbo365/guide/license_overwiew_reports.html?ver=40 | https://helpcenter.veeam.com/docs/vbo365/powershell/get-vbolicenseoverviewreport.html?ver=40. | . ",
    "url": "/docs/vbo/blueprint/10_licensing.html#licensing",
    "relUrl": "/vbo/blueprint/10_licensing.html#licensing"
  },"1": {
    "doc": "10 Licensing",
    "title": "10 Licensing",
    "content": " ",
    "url": "/docs/vbo/blueprint/10_licensing.html",
    "relUrl": "/vbo/blueprint/10_licensing.html"
  },"2": {
    "doc": "11 Monitoring & Reporting",
    "title": "Monitoring",
    "content": "Windows Service Monitoring . We recommend monitoring the following services on systems per this document to meet expected platform availability. VBO365 &amp; VCC Server . | Service Display Name | Service Name | Startup Type | Log On as | . | SQL Server (VEEAMSQL2016) | MSSQL$VEEAMSQL2016 | Automatic | Local System | . | *Veeam Backup for Microsoft Office 365 RESTful API Service | Veeam.Archiver.RESTful.Service | Automatic (Delayed Start) | Local System | . | Veeam Backup for Microsoft Office 365 Service | Veeam.Archiver.Service | Automatic (Delayed Start) | Local System | . | **Veeam Backup for Microsoft Office 365 Proxy | Veeam.Archiver.Proxy | Automatic (Delayed Start) | Local System | . | Veeam Backup Service | VeeamBackupSvc | Automatic (Delayed Start) | Local System | . | Veeam Cloud Connect Service | VeeamCloudSvc | Automatic (Delayed Start) | Local System | . | Veeam Installer Service | VeeamDeploySvc | Automatic | Local System | . * The Veeam Backup for Microsoft Office 365 RESTful API Service is installed automatically but is disabled by default. When this service is enabled, the Startup Type is changed to Automatic (Delayed Start). This process is described here: . https://helpcenter.veeam.com/docs/vbo365/guide/vbo_rest_api_settings.html?ver=40 . ** The Veeam Backup for Microsoft Office 365 Proxy is installed automatically in the VBO Server although in this blueprint, the Proxy service is not used on this Server. VBO Proxy . | Service Display Name | Service Name | Startup Type | Log On as | . | Veeam Backup for Microsoft Office 365 Proxy | Veeam.Archiver.Proxy | Automatic (Delayed Start) | Local System | . Veeam Cloud Connect Gateway . | Service Display Name | Service Name | Startup Type | Log On as | . | Veeam Cloud Gateway Service | VeeamGateSvc | Automatic | Local System | . | Veeam Data Mover Service | VeeamTransportSvc | Automatic | Local System | . | Veeam Installer Service | VeeamDeploySvc | Automatic | Local System | . Note: There are additional Veeam services deployed as part of the default installation. They are not in this list because they are not involved in a Veeam Backup for Microsoft O365 / Veeam Cloud Connect infrastructure. Note: Microsoft SQL Service is available in the server only if during the installation has been chosen to install the default Express version. If a dedicated SQL Server is created during the design, this service may not be available in the Veeam Backup &amp; Replication server. ",
    "url": "/docs/vbo/blueprint/11_monitoring_reporting.html#monitoring",
    "relUrl": "/vbo/blueprint/11_monitoring_reporting.html#monitoring"
  },"3": {
    "doc": "11 Monitoring & Reporting",
    "title": "11 Monitoring & Reporting",
    "content": "(click to expand table of contents) . | Monitoring . | Windows Service Monitoring . | VBO365 &amp; VCC Server | VBO Proxy | Veeam Cloud Connect Gateway | . | . | . ",
    "url": "/docs/vbo/blueprint/11_monitoring_reporting.html",
    "relUrl": "/vbo/blueprint/11_monitoring_reporting.html"
  },"4": {
    "doc": "12 Loss Protection",
    "title": "Loss Protection",
    "content": "To protect this deployment from accidental loss or to provide additional redundancy we recommend following the guidance detailed here: . https://bp.veeam.com/vbo/guide/design/3-2-1.html . ",
    "url": "/docs/vbo/blueprint/12_loss_protection.html#loss-protection",
    "relUrl": "/vbo/blueprint/12_loss_protection.html#loss-protection"
  },"5": {
    "doc": "12 Loss Protection",
    "title": "12 Loss Protection",
    "content": " ",
    "url": "/docs/vbo/blueprint/12_loss_protection.html",
    "relUrl": "/vbo/blueprint/12_loss_protection.html"
  },"6": {
    "doc": "13 Conclusion",
    "title": "Conclusion",
    "content": "By following this blueprint, a VCSP will be able to deliver a scalable and performant Backup for Office 365 Service to their customer base. The key aims of this document were to provide: . Multi-Tenant software architecture and operations . This blueprint defines the software components that are required to deploy a scaleable multi-tenant Backup for Office 365 solution. Self-Service restores . Delivering a positive experience to a Tenant is key to a successful service. The steps in this document have stated what software is required and the instructions to enable self-service . Self-service restore options provide Tenants the ability to perform restores whenever required without necessitating VCSP involvement. Scale-up and scale-out approach to increase workload capacity . The VBO components have stated tolerances, both minimums and maximums. This guide has taken a number of assumptions and scaled out accordingly; your specific Tenant profiles may vary. It is essential that you monitor your deployment to record and understand an expected performance baseline. Subsquently, identify areas of stress as you grow and scale out , or up, as and when required. Data reduction applied to backups . Controlling storage consumption will affect both the profitability of your service and the ability to easily scale this solution. This document has focused on Object Storage as the recommended platform, as it provides the meaningful data reduction, regardless of object type. Encryption at rest . Backup for Microsoft Office 365 allows you to configure passwords that you can use to encrypt data in object storage repositories using the AES-256 specification. Per Tenant reporting . Standard reporting features are available within the GUI, although this can be augmented by leveraging the available APIs.ß . Backup and Restore auditing . The GUI of Veeam Backup for Office 365 allows you to audit both the backup and restore history of the application. Backup details: https://helpcenter.veeam.com/docs/vbo365/guide/backup_metrics.html?ver=40 . Restore details: https://helpcenter.veeam.com/docs/vbo365/guide/restore_metrics.html?ver=40 . Implications beyond this Blueprint . Building and delivering a service to support the protection of Microsoft 365 has many components. This blueprint aims, as stated, to guide you towards a scalable and supportable platform. Many other considerations can influence what is actually delivered. While these are outside of the scope of this document we would love to talk to you about it! Consider reaching out to your Veeam Engineering team! . Contributors and Thanks . Thank you to all those inside Veeam and in the VCSP community who assisted during the creation of and review this document. Tim Hudson, Nick Furnell, and Sam Fawaz contributed in creating this document. ",
    "url": "/docs/vbo/blueprint/13_conclusion.html#conclusion",
    "relUrl": "/vbo/blueprint/13_conclusion.html#conclusion"
  },"7": {
    "doc": "13 Conclusion",
    "title": "13 Conclusion",
    "content": "(click to expand table of contents) . | Conclusion . | Multi-Tenant software architecture and operations | Self-Service restores | Scale-up and scale-out approach to increase workload capacity | Data reduction applied to backups | Encryption at rest | Per Tenant reporting | Backup and Restore auditing | Implications beyond this Blueprint | Contributors and Thanks | . | . ",
    "url": "/docs/vbo/blueprint/13_conclusion.html",
    "relUrl": "/vbo/blueprint/13_conclusion.html"
  },"8": {
    "doc": "1 Basic Concept Steps",
    "title": "Basic Concept Steps",
    "content": "Regardless whether this is a VCSP/MSP managed environment or a Tenant managed environment, here’s the basic steps required when restoring Cloud Connect backups: . | Tenant configures backups/backup copy jobs to VCSP backup repository | Tenant declares DR test or DR event | VCSP/MSP Creates recovery environment | VCSP/MSP Creates Tenant dedicated recovery Veeam Backup and Replication server . | Add Proxies/vPower NFS servers as necessary . | Add Recovery Environment Resources (vCenter/Hosts/vCD) DO NOT ADD REPOSITORIES YET! . | . | If this is a DR Test, verify Tenant jobs are disabled from the source location | Follow restore procedures choosing the below recovery model: . | VCSP/MSP Managed Recovery . | Tenant Managed Recovery . | . | . ",
    "url": "/docs/vcc/tenant_restore/1_basic_concept_steps.html#basic-concept-steps",
    "relUrl": "/vcc/tenant_restore/1_basic_concept_steps.html#basic-concept-steps"
  },"9": {
    "doc": "1 Basic Concept Steps",
    "title": "1 Basic Concept Steps",
    "content": " ",
    "url": "/docs/vcc/tenant_restore/1_basic_concept_steps.html",
    "relUrl": "/vcc/tenant_restore/1_basic_concept_steps.html"
  },"10": {
    "doc": "1 Introduction",
    "title": "1. Introduction",
    "content": "Microsoft provides a wide array of powerful services within the Microsoft Office 365 solution, but a comprehensive backup of Microsoft Office 365 data is not one of them. Veeam strives to provide data protection for on premise environments, public cloud environments including SaaS applications, as well as hybrid environments. Veeam Backup for Microsoft Office 365 provides the comprehensive backup solution for Microsoft Office 365 data and can be delivered as a service to tenants. As organizations continue to adopt public cloud, the need to leverage integrations and define best practices around public cloud continue to grow. Veeam’s integration with object storage such as Azure Blob has sparked more interest in leveraging Microsoft Azure. Cost analysis shows that Backup as a Service (BaaS) for Microsoft Office 365 can fully run in Microsoft Azure for a profitable revenue stream, being provided by Veeam Cloud Service Providers (VCSP). 1.1. Veeam Service Offerings . Service providers who are part of the Veeam Cloud Service Provider (VCSP) program can leverage Veeam to provide Backup as a Service (Baas) for on-premises, hosted, or public cloud workloads. Backup Repository as a Service (BRaaS) via Veeam Cloud Connect Backup and Disaster Recovery as a Service (DRaaS) via Veeam Cloud Connect Replication are also service offerings. Tenants can consume these services from their service provider of choice to send backups off site as well as replicate VMs for failover and failback, achieving minimized RTOs. Additionally, service providers can also protect Microsoft Office 365 data on behalf of their tenants. VCSPs can build their own Veeam-powered services offering, leveraging Veeam software built from the ground up for multi-tenancy and scalability, operating on a rental licensing model. 1.2. Microsoft Service Offerings . Microsoft Office 365 is a cloud-based service designed to provide the Microsoft Office productivity suite as a service. It is licensed as a subscription and market adoption is high. Another key offering from Microsoft is Infrastructure as a Service (IaaS), offering compute and storage provided by Microsoft Azure on a subscription basis. This is ideal for service providers who want to augment their existing datacenters taking a hybrid approach or can be for Managed Service Providers (MSPs) that do not want to maintain datacenter infrastructure themselves. In short, Microsoft Azure can be leveraged to provide Veeam powered services. 1.3. Microsoft Partner Agreements/Subscriptions . Service providers who are considering the use of Azure to provide Veeam powered services may also be or be consider becoming a Microsoft Cloud Solution Providers (CSPs). Service providers who work with both privately owned datacenters and public cloud, taking a hybrid approach, will become both a Veeam and Microsoft service provider partner. It is common for a service provider to be both a VCSP and a CSP. It is important to understand the Microsoft partner agreements in which a service provider operates under to provide services. The following section provide an overview of subscription types to help avoid situations where a service provider may not be in compliance with Microsoft regulation. The following provides some detail around the different subscription options and whether or not shared services can be run from those subscriptions. 1.3.1. Microsoft Pay-As-You-Go . Azure services can be procured with pay-as-you-go pricing. Pay only for what is consumed each month. There are no Microsoft margins/incentives or discounted pricing but has no upfront commitment and can be canceled anytime. Shared services such as Veeam Cloud Connect and Veeam Backup for Office 365 can be hosted from this subscription. 1.3.2. Microsoft Enterprise Agreement . An Enterprise Agreement is a commitment-based Microsoft Volume Licensing agreement for commercial organizations signing a new enrollment with 500 or more users/devices that want a manageable volume licensing program that gives them the flexibility to buy cloud services and software licenses under one agreement. This provides discounted pricing on Azure consumption in which shared services such as Veeam Cloud Connect or Veeam Backup for Office 365 can be run. 1.3.3. Microsoft Partner Shared Services Account . Azure Partner Shared Services is a type of CSP program enabling partners to purchase Azure subscriptions for their own use. It provides a uniform method for purchasing, tracking, and managing Azure in addition to the ability to consolidate Azure licensing and reselling agreements with Microsoft. Partners have the same flexibility to use Azure subscriptions in CSP as they do in the Microsoft Enterprise Agreement and Web Direct programs, opening up scenarios such as: build development and test environments, deploy internal workloads, and host shared services or multi-tenant applications such as Veeam Cloud Connect or Veeam Backup for Office 365. Microsoft Margins/incentives are not recognized but allow the hosting of shared services such as Veeam Cloud Connect or Veeam Backup for Office365. 1.3.4. Microsoft CSP . The Microsoft Cloud Solution Provider (CSP) program is intended for a Service Provider to resell Azure Cloud to tenants and does not allow a Service Provider to be a tenant providing shared services. Effectively, service providers cannot create their own CSP Tenant and consume their “own” resources. This means that a CSP Tenant account cannot be used to host a shared services solution such as Veeam services (or any other service). However, in the case where object storage can be leveraged as part of the solution, it is possible to leverage a Microsoft Partner Shared Services subscription (or other qualified subscriptions) to host a centralized Veeam solution, but also drive backup data into a CSP Tenant’s Azure Blob. This can be achieved by driving data to containers/buckets associated under the CSP tenant accounts. ",
    "url": "/docs/vbo/blueprint_azure/1_intro.html#1-introduction",
    "relUrl": "/vbo/blueprint_azure/1_intro.html#1-introduction"
  },"11": {
    "doc": "1 Introduction",
    "title": "1 Introduction",
    "content": "(click to expand table of contents) . | 1. Introduction . | 1.1. Veeam Service Offerings | 1.2. Microsoft Service Offerings | 1.3. Microsoft Partner Agreements/Subscriptions . | 1.3.1. Microsoft Pay-As-You-Go | 1.3.2. Microsoft Enterprise Agreement | 1.3.3. Microsoft Partner Shared Services Account | 1.3.4. Microsoft CSP | . | . | . ",
    "url": "/docs/vbo/blueprint_azure/1_intro.html",
    "relUrl": "/vbo/blueprint_azure/1_intro.html"
  },"12": {
    "doc": "1 Introduction",
    "title": "Introduction",
    "content": "VCSPs have themselves typically defined what’s required for a VBO service. Derived from field experience and industry standards these requirements are met when this blueprint is used. A deployment of this blueprint will provide: . | Multi-Tenant software architecture and operations at scale | Self-Service restore | Scale-up and scale-out approach to increase workload capacity | Data reduction applied to backups | Encryption at rest | Per Tenant reporting | Backup and Restore auditing | . Software Versions . As of the date of publication, this blueprint is designed using the following components. | Veeam Backup and Replication v10a (10.0.1.4854) | Veeam Backup for Microsoft O365 v4c (4.0.1.545) | Veeam Explorer for Exchange v10.0.0.4461/519 | Microsoft Outlook 64-bit v2002 Build 16.012527.20986 | . ",
    "url": "/docs/vbo/blueprint/1_intro.html#introduction",
    "relUrl": "/vbo/blueprint/1_intro.html#introduction"
  },"13": {
    "doc": "1 Introduction",
    "title": "1 Introduction",
    "content": " ",
    "url": "/docs/vbo/blueprint/1_intro.html",
    "relUrl": "/vbo/blueprint/1_intro.html"
  },"14": {
    "doc": "1 Repository Considerations",
    "title": "Repository considerations",
    "content": "Task consideration . A task at the repository level is consumed differently than tasks at the proxy level. If “per-VM backup files” is enabled on the repository, each concurrently processed VM will consume one repository task, while each virtual disk of this VM will consume one proxy task (the typical ratio is 3 disks per VM). On the opposite, if “per-VM backup files” is disabled, a single backup job will consume just one repository task regardless how many VMs are being processed by the job. But the number of consumed proxy tasks will stay the same (one task per each virtual disk). Veeam® Backup &amp; Replication™ does not apply the Limit maximum concurrent tasks option to back up repositories used as cloud repositories. For Veeam Cloud Connect Backup, the maximum allowed number of concurrent tasks is defined per tenant in the properties of the tenant account. ReFS/XFS RAM allocation . When using the Windows ReFS filesystem, the recommendation is to add 0.5 GB RAM per TB of ReFS storage. However, you don’t have to scale this indefinitely. 128GB of RAM are often enough for task, OS and ReFS requirements if the total ReFS volume size of the server is below 200 TB. Depending on the ReFS size or task requirements, you may want to add up more memory but there should be no need to go over 256 GB. When formatting your filesystem, use the below recommendations for the best performance: . | Filesystem | Recommended Block Size | . | ReFS | 64k | . | XFS | 4k | . https://helpcenter.veeam.com/docs/backup/vsphere/backup_repository_block_cloning.html?ver=100#linux . Beware that if you have multiple LUNs/RAIDs/Drives, you need to consider the total storage amount combined for that one OS. https://bp.veeam.com/vbr/VBP/2_Design_Structures/D_Veeam_Components/D_backup_repositories/ . Additional load . Also consider the impact backup copy jobs, SOBR capacity tier offload, and replica seeding will have on the repository. This will add I/O load when these jobs are scheduled to run and could also require data block rehydration before sending to the target location. ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/1_repository_considerations.html#repository-considerations",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/1_repository_considerations.html#repository-considerations"
  },"15": {
    "doc": "1 Repository Considerations",
    "title": "1 Repository Considerations",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/1_repository_considerations.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/1_repository_considerations.html"
  },"16": {
    "doc": "2 Architecture",
    "title": "Architecture",
    "content": "Two applications will be used to meet our requirements laid out above. Veeam Backup for Office 365 and Veeam Backup and Replication. In order to provide end-user self-service, Veeam Backup and Replication will be installed using a rental license with Cloud Connect enabled. This allows the Cloud Connect feature to be enabled by which Tenants are authenticated for self-service restore. By combining the Cloud Connect service from Veeam Backup and Replication and Veeam Backup for Office 365, consumers of a VCSP’s offerings can perform self-service restore operations through Veeam Explorers. Veeam Cloud Connect Documentation: . https://helpcenter.veeam.com/docs/backup/cloud/cloud_overview.html?ver=100 . Veeam Backup for Office 365 Documentation: . https://helpcenter.veeam.com/docs/vbo365/guide/vbo_introduction.html?ver=40 . Veeam Explorers Overview: . https://helpcenter.veeam.com/docs/backup/explorers/explorers_introduction.html?ver=100 . Use of Virtual Machines . It is recommended that all systems deployed are virtual machines for ease of installation and flexibility for scale. It is up to the VCSP to decide on the most appropriate platform and location taking into consideration the following: HA capabilities, storage durability, and operational costs. Backup and Replication (Cloud Connect) . An independent installation of Backup and Replication is recommended in order to prevent any outside Veeam Cloud Connect Backup or Replication workload from impacting this Backup for Office 365 platform. This would apply to both performance and non-performance related troubleshooting scenarios. Once a Cloud Connect (VCSP) license has been installed on this Backup and Replication server it will be referred to as a Veeam Cloud Connect Server (VCC). Provisioned by the Cloud Connect server, the Cloud Gateway (CGW in Diagram #1) will provide an ingress point during Tenant self-service restore operations. The Cloud Connect server authenticates Tenant Backup and Replication servers &amp; Explorers (Exchange, SharePoint, OneDrive) when performing restore activities. The connection between Tenant Explorers and Cloud Connect is also used to provide restored data in some restore scenarios. The Day 1 deployment section provides a walkthrough of installing Veeam Backup and Replication, installing a Cloud Connect license, and configuration of the Cloud Gateway. Diagram #1 (Cloud Connect) . Backup for Office 365 . Veeam Backup for Office 365 will be installed on the Backup and Replication server created above. This combination provides secure multi-tenant self-service restore capabilities. The “work” configured by the Backup for Office 365 server will be performed by a separate system, a Backup for Office 365 proxy. One or more proxies will act as multi-tenant workers that service multiple jobs and organizations. Separate repositories and object storage repositories will be used to store our tenant data. For maximum performance, scalability, and separation of system roles the Backup and Replication/Backup for Office 365 server should *not* be used as a Backup for Office 365 Proxy. There are some scenarios in which a VBO Server might be utilized for the Proxy role, such as Public Cloud Deployments. In a Public Cloud deployment, the financial impact is largely a justification of the decision to combine roles. However, for the purpose of this blueprint, which is to maximize performance, scalability, etc. we will not utilize the VBO Server as a Proxy for backup jobs. The Day 1 deployment section provides a walkthrough of installing Backup for Office 365. Following the Day 1 deployment guide sizing provides both an efficient design and a straightforward path to scale with future demand. Diagram #2 (VBO Core components) . Modern Authentication . Authenticating as a legitimate user or application is required to interact with Office 365. Microsoft has provided an important functionality for Office 365 users who have enabled or been forced to use Modern Authentication. Modern Authentication is defined here: https://docs.microsoft.com/en-us/microsoft-365/enterprise/hybrid-modern-auth-overview?view=o365-worldwide#what-is-modern-authentication. “Modern Authentication enables Active Directory Authentication Library (ADAL)-based sign-in for Office client apps across different platforms. This enables sign-in features such as Multi-Factor Authentication (MFA), smart card, and certificate-based authentication.” . Leveraging certificate-based authentication was included in Backup for Office 365 v4c and it is the suggested method for configuring Organizations in this blueprint. Active Directory . Veeam Backup for Office 365 v4c requires Active Directory and that the VBO server and the Proxies/Repositories are in the same or trusted Domain. Additional Active Directory considerations are detailed here: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_considerations.html?ver=40 . Backup Storage . The Veeam Backup for O365 software supports the use of two different storage types. In this blueprint we recommend using both Block and Object Storage. | Storage Type | Use case | Reasoning | . | Block | O365 Local Cache / Metadata | Local cache increases search speed and reduces API calls from Object (reducing data egress charges if applicable) | . | Object Storage | O365 Tenant protected data | Unlimited storage/expansion. Bucket per Tenant | . Block Storage . When combined with Object Storage Veeam Backup for Microsoft Office 365 uses a cache on Block Storage from which it retrieves the structure of the backed-up objects of your organizations. This cache is stored and maintained in JetBlue DB format, on Block storage attached to the VBO Proxies. Granular detail for the Object Storage Cache can be found here: https://helpcenter.veeam.com/docs/vbo365/guide/understanding_cache.html?ver=40. An Object Storage platform is used in this blueprint to hold backed-up O365 data. Object Storage . Object Storage is a foundational concept for this blueprint. For a production installation, we recommend using a platform with software/hardware support. There are many vendors with Object Storage platforms suitable for use. The Veeam Ready program provides verified compatibility with Object Storage providers. See the Veeam Ready Object section here: https://www.veeam.com/ready.html. Object Storage, when used by Veeam Backup for Office 365, provides the following benefits utilized in this blueprint: . | Encryption at rest for Backup for Office 365 Backup files | Data reduction of 40 - 55% (depending on Exchange, SharePoint, OneDrive ratio) | Allows for maximum scalability. Jet DBs, on Block Storage, are used for system configuration and cache repositories when combined with Object Storage. | Purpose-built Veeam backup format | . Diagram #3 Comprehensive Backup for Office 365 (including Cloud Connect components) . ",
    "url": "/docs/vbo/blueprint/2_architecture.html#architecture",
    "relUrl": "/vbo/blueprint/2_architecture.html#architecture"
  },"17": {
    "doc": "2 Architecture",
    "title": "2 Architecture",
    "content": "(click to expand table of contents) . | Architecture . | Use of Virtual Machines | Backup and Replication (Cloud Connect) . | Diagram #1 (Cloud Connect) | . | Backup for Office 365 . | Diagram #2 (VBO Core components) | Modern Authentication | Active Directory | . | Backup Storage . | Block Storage | Object Storage | Diagram #3 Comprehensive Backup for Office 365 (including Cloud Connect components) | . | . | . ",
    "url": "/docs/vbo/blueprint/2_architecture.html",
    "relUrl": "/vbo/blueprint/2_architecture.html"
  },"18": {
    "doc": "2 Block Size Considerations",
    "title": "Block size consideration",
    "content": "Physical Layer Settings . The following information is from a forum post by Anton Gostev linked here: . https://forums.veeam.com/veeam-backup-replication-f2/thanks-for-the-veeam-and-refs-magic-t59927.html#p331597 . Based on Veeam 512k block size ( see the next section on setting this in the Job settings), Veeam recommends a RAID stripe size of 256kb versus the default size of 64kb. Example: With a backup block size of 512kb and a RAID stripe of 64kb, it would take 8 IOPS to read 1 Veeam backup block. If you set the RAID stripe to 256kb, the same read would take 2 IOPS. This would greatly reduce the requirements of the storage performance. Veeam Job Settings . The block size of the backup file can impact the performance of the backup repository. Choosing the right setting should be based on the storage, not necessarily on the location of the storage. Backup copy jobs inherit primary backup jobs block size setting . This setting is under the Storage tab in a job . Advanced Settings – Storage, Storage optimization: . Here are the Storage optimization settings currently available with their corresponding block sizes: . | Storage optimization | Block size | Block size with compression1 | . | Local target (large blocks) | 4096KB | 2048KB | . | Local target | 1024KB | 512KB | . | LAN target | 512KB | 256KB | . | WAN target | 256KB | 128KB | . Which block size should you choose? See the next section: More Block Size Information . Veeam can use different block sizes to store backups on the target. The block size is defined in the backup job settings and will be kept across all copies. Non-VM backups settings are set to Local target automatically, and the size cannot be modified. Block size changes are only activated by an active full and will only be used for the new backup chains (the data stored already are not touched). More Block Size Information . This section will focus on additional information to keep in mind when selecting the block size in your job configuration. For most use cases, we recommend the default block size: Local target . Note: No matter what the actual target is, if offloading to Capacity Tier (object storage), then Local target (large blocks) or Local target should be used to take best advantage of the object storage and minimize API calls. Space Savings Considerations: Block size matters! Whether you’re using a storage that supports block clone savings (i.e. ReFS/XFS/object storage) or a deduplication appliance, the smaller the block size, the more space savings are to be had. That said, we typically do not see partners using a block size smaller than Local target. This also plans for success in case Capacity Tier is added on a later occasion. Capacity Tier Considerations: Every block equals at least 1 API call so they can add up quickly and are a billable item for most object storage providers. For example, let’s assume you offload 1TB of data daily to object storage. Let’s compare how the estimated number of API calls vary by block size: . | Block size | Number of API calls | . | 4096KB | 250,000 | . | 1024KB | 1 million | . | 512KB | 2 million | . | 256KB | 4 million | . 1TB/{block size} = Number of blocks = Number of API calls . Another thing to consider is egress charges during restores from Capacity Tier. When restoring backups, Veeam only downloads the blocks it must from the Capacity Tier and will prefer already existing local blocks. As mentioned in the space savings considerations, larger block sizes result in less duplicate blocks. As such, it could result in higher egress charges due to more downloaded blocks. | We estimate usually a 50% reduction when compression is set to “Optimal” (the default value). &#8617; . | . ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/2_block_size.html#block-size-consideration",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/2_block_size.html#block-size-consideration"
  },"19": {
    "doc": "2 Block Size Considerations",
    "title": "2 Block Size Considerations",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/2_block_size.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/2_block_size.html"
  },"20": {
    "doc": "2 Sizing",
    "title": "2. Backup for Office 365 Sizing and Architectural Components",
    "content": "Sizing of a Veeam Backup for Office 365 (VBO365) environment depends on the number of objects the system will protect. Objects are defined as a mailbox, archive mailbox, shared mailbox, OneDrive, Personal SharePoint site, and a Shared SharePoin site. The number of users can help to derive the expected number of objects to be protected based on a setup of assumptions from the field. While this is a good estimate, “mileage” may vary. This document focuses on sizing for 1000 users. 2.1. Veeam Office 365 Data Sizing Assumptions . The following provides a list of assumptions for reference based on 1000 Users. 1000 users are assumed to have the number of objects tabulated below. | Office 365 Object | Quantity | . | Exchange Mailboxes | 1000 | . | Exchange Archive Mailboxes | 500 | . | Exchange Shared Mailboxes | 75 | . | OneDrive’s | 1000 | . | Personal SharePoint Sites | 0 | . | Shared SharePoint Sites | 15 | . | Total Number of Objects | 2590 | . The following provides an assumed per user and total space consumption for Office 365 users. | Office 365 Object | Quantity | . | Office 365 User Data Size | 10 GB | . | Office 365 1000 User Data Size | 10 TB | . This provides a reference point to extrapolate sizing for any number of users to protect. 1000 users will typically generate about 2,590 objects and utilize about 5TB of storage space. 2.2. Azure Architecture Compute Requirements . 2.2.1. VBO365 Management Compute Requirements . The minimum compute requirements for the VBO365 server is 4 Cores / 8GB RAM and can manage up to 10 proxies and up to 160,000 objects. While it is recommended to have standalone proxies, to save on cost in Azure, this 1st server can be a consolidated VBO365 Management Server + Proxy architecture, initially backing up 2,000 objects at minimum spec (4 Cores / 8GB RAM), which maps to an F4s v2 Azure VM size. This server can be scaled up to a D16s v3 to manage up to 9 additional proxies (a total of 10 proxies including itself) and backup 160,000 objects after scaling out with the 9 additional proxies. On its own, the combined VBO365 + Proxy server can backup 16,000 objects which equates to about 6,000 users at maximum spec (16 Cores / 64GB RAM) based on assumptions in Section 2.1. 2.2.2. VBO365 Proxy Compute Requirements . VBO365 Proxies are the data movers, reading data from Office 365 and writing data to the backup repository. One standalone Proxy can handle about 16,000 objects. As the number of users grow, compute requirements steer more toward memory consumption. The minimum requirements for a proxy server is 4 Cores / 8 GB RAM to initially backup 2,000 objects and would scale up to 8 Cores / 32 GB RAM to process up to 16,000 objects. Note: When scaling up the Proxy server compute resources, the VBO services should be restarted to become aware of the available new compute resources. This provides more efficient memory allocation. Note: Additional proxies beyond the initial VBO365 server will require the VBO and Proxy instances to be domain joined. Azure Active Directory can be leveraged to accomplish this. 2.2.3. Suggested Azure VM Sizes . The following table provides suggested Azure VM sizes that can be utilized. | Required CPU (Cores) | Required RAM (GB) | Azure VM Size (Equivalent) | . | 4 | 8 | F4s v2 | . | 4 | 16 | D4s v3 | . | 8 | 32 | D8s v3 | . | 16 | 64 | D16s v3 | . 2.2.4. User to Server Architecture Translation Table with VM Sizes . Based on the previously stated object assumptions, the following table was derived to provide a translation of the number of users to objects, and finally to Azure VMs. Utilize this table to determine the Azure compute architecture needed. The table demonstrates how to scale up and scale out. It consists of the VBO365 server and a number Proxy servers. Of course “mileage” may vary but this provides a reference point. | Number of Users | Est. Number of Objects | Total Num. of Servers | VBO + Proxy Azure VM | Proxy Azure VM(s) | Last Proxy Azure VM | . | 500 | 1,295 | 1 | F4s v2 |   |   | . | 750 | 1,943 | 1 | F4s v2 |   |   | . | 1,000 | 2,590 | 1 | D4s v3 |   |   | . | 3,000 | 7,770 | 1 | D8s v3 |   |   | . | 5,000 | 12,950 | 1 | D8s v3 |   |   | . | 6,000 | 15,540 | 1 | D8s v3 |   |   | . | 7,500 | 19,425 | 1 | D8s v3 |   |   | . | 10,000 | 25,900 | 2 | D8s v3 |   | D4s V3 | . | 20,000 | 51,800 | 3 | D16s v3 | D8s v3 (x2) |   | . | 40,000 | 103,600 | 6 | D16s v3 | D8s v3 (x4) | F4s v3 | . | 50,000 | 129,500 | 7 | D16s v3 | D8s v3 (x6) |   | . | 60,000 | 155,400 | 8 | D16s v3 | D8s v3 (x7) |   | . 2.3. VBO365 Repositories . For VBO365, unlike Veeam Backup and Replication (VBR), backup data is stored in a database file unless leveraging object storage. VBO365 repositories are a collection of database files in folder paths that can map to folders in an object storage bucket/container. An independent repository server is not required to host each repository. Instead, repositories are hosted by Proxy servers. A repository cannot be shared/accessed by more than one Proxy server. Also, unlike VBR, retention policies are defined at the repository level rather than the job level. Therefore, for this reason alone each tenant should have their own repository depending on their retention requirements. If a tenant requires more than one retention policy, then a repository needs to be created for each retention policy a tenant has. Therefore, a tenant can have multiple retention policies, thus multiple repositories. A defined repository for each tenant is also the mechanism in which multi-tenancy is achieved at the volume level. Tenant data is segregated into its own backup database file in its own folder on the volume. Repository sizing depends on the storage consumed within Office 365. Assumptions can be made, or reports can be generated in Office 365 to provide metrics. From Section 2.1, field data suggest that a user typically utilizes an assumed 5 GB of storage in Microsoft Office 365. Thus, the required backup space can be computed. There are 2 types of retention, Item-Level Retention and Snapshot-Based Retention. Snap based retention would require more storage space. Refer to the following link to learn more: https://helpcenter.veeam.com/docs/vbo365/guide/retention_policy.html?ver=40. Note: The sizing in this document assumes snapshot based backups. The following sections provides use case scenarios to help provide sizing guidance. This document focuses on building repositories that leverage object storage, specifically Azure Blob. Note: The use of object storage is highly recommended for best reliability and scalability! . 2.3.1. Block Storage Requirements (Metadata) and Object Storage (Backup Data) . In Azure it is recommended to leverage Managed Disks to serve as the repository space for all data. Furthermore, it is highly recommended to leverage Object Storage for the Backup data. Use of Object storage means that backup data will no longer be stored in the backup (database) file. The block storage (direct attached to the VBO365 or proxy server) serves as storage space for metadata only (stored in the backup database file) while the backup data resides in the object storage. This minimizes block storage consumption to save on cost, but also provides greater data reduction in comparison to block storage. The expected sizing for the metadata volume is about 1-1.5% of the Office 365 data. Additionally, backup data offers a 40-55% compression. The following table provides the estimated storage space required for the metadata volume based on Section 2.1 assumptions, as well as the Microsoft Disk sizes. | Num of Users | Microsoft Office 365 Data (TB) | Estimated (1.1%) Required Metadata Size (GB) | Microsoft Disk Sizes (GB) for Metadata | Estimated (45%) Compressed Backup Data Size (TB) | . | 500 | 5.0 | 55.0 | 64 | 3.25 | . | 750 | 7.5 | 82.5 | 128 | 4.88 | . | 1,000 | 10.0 | 110.0 | 128 | 6.50 | . | 3,000 | 30.0 | 330.0 | 512 | 19.50 | . | 5,000 | 50.0 | 550.0 | 1024 | 32.50 | . | 6,000 | 60.0 | 660.0 | 1024 | 39.00 | . | 7,500 | 75.0 | 825.0 | 1024 | 48.75 | . | 10,000 | 100.0 | 1,100.0 | 2,048 | 65.00 | . | 20,000 | 200.0 | 2,200 | 4,096 | 130.00 | . | 40,000 | 400.0 | 4,400 | 8,192 | 260.00 | . | 50,000 | 500.0 | 5,500 | 8,192 | 325.00 | . | 60,000 | 600.0 | 6,600 | 8.192 | 390.00 | . 2.3.2. Virtual Network Service Endpoints . Virtual Network (VNet) Service Endpoints provide secure and direct connectivity to Azure services via an optimized route over the Azure backbone network. Endpoints allow you to secure your critical Azure service resources to only your virtual networks. Service Endpoints enable private IP addresses in the VNet to reach the endpoint of an Azure service without needing a public IP address on the VNet and can essentially avoid egress costs by preventing traffic from leaving the VNet. Refer to the following link for more information: https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview. ",
    "url": "/docs/vbo/blueprint_azure/2_sizing.html#2-backup-for-office-365-sizing-and-architectural-components",
    "relUrl": "/vbo/blueprint_azure/2_sizing.html#2-backup-for-office-365-sizing-and-architectural-components"
  },"21": {
    "doc": "2 Sizing",
    "title": "2 Sizing",
    "content": "(click to expand table of contents) . | 2. Backup for Office 365 Sizing and Architectural Components . | 2.1. Veeam Office 365 Data Sizing Assumptions | 2.2. Azure Architecture Compute Requirements . | 2.2.1. VBO365 Management Compute Requirements | 2.2.2. VBO365 Proxy Compute Requirements | 2.2.3. Suggested Azure VM Sizes | 2.2.4. User to Server Architecture Translation Table with VM Sizes | . | 2.3. VBO365 Repositories . | 2.3.1. Block Storage Requirements (Metadata) and Object Storage (Backup Data) | 2.3.2. Virtual Network Service Endpoints | . | . | . ",
    "url": "/docs/vbo/blueprint_azure/2_sizing.html",
    "relUrl": "/vbo/blueprint_azure/2_sizing.html"
  },"22": {
    "doc": "2 VCSP/MSP Managed Recovery Procedures",
    "title": "VCSP/MSP Managed Recovery",
    "content": "Depending on your Cloud Connect Architecture, choose the correct procedures to recover your tenant’s information. | Windows Based Repository | Linux Based Repository | SAN/LUN Repository | Object Storage Repository | Cloud Gateway/Gateway Pool Recovery | . Windows Based Repository . | Determine Windows Folder Location for Tenants data . | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to Windows Repository server | Add an SMB share based (can use Administrative Share) Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Linux Based Repository . | Determine Linux Folder Location for Tenants data | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to Linux Repository server | Add an NFS based Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . SAN/LUN Repository . | Determine SAN/LUN volume on storage device for Tenants data . | Is SAN presented as LUN to Windows or Linux? Or SMB/NFS share? . | This will determine how to present the snapshot to the Tenant Veeam Backup Server . | . | Create a snapshot of volume | Present storage snapshot as storage for repository . | Windows mounted LUN – would recommend a new Windows server build with attached snapshot LUN . | Linux mounted LUN – would recommend a new Linux server build with attached snapshot LUN . | SMB or NFS – create new share to the snapshot location . | . | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to storage snapshot location presented | Add storage snapshot presented as Repository to Tenant Backup Server . | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Object Storage Repository . | Determine Object Bucket/Folder Location for Tenants data | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to Object Storage location | Add the Object location as a Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Cloud Gateway/Gateway Pool Recovery . | Create Cloud Gateway pool based on local LAN inside VCSP Environment | Pause Tenant jobs to Cloud Connect | Switch Tenant Cloud Connect access to use the LAN Cloud Gateway Pool | Verify network connectivity from created Tenant Backup server under Basic Step 4 to Object Storage location | Add the Object location as a Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . ",
    "url": "/docs/vcc/tenant_restore/2_vcsp_recovery_procedures.html#vcspmsp-managed-recovery",
    "relUrl": "/vcc/tenant_restore/2_vcsp_recovery_procedures.html#vcspmsp-managed-recovery"
  },"23": {
    "doc": "2 VCSP/MSP Managed Recovery Procedures",
    "title": "2 VCSP/MSP Managed Recovery Procedures",
    "content": " ",
    "url": "/docs/vcc/tenant_restore/2_vcsp_recovery_procedures.html",
    "relUrl": "/vcc/tenant_restore/2_vcsp_recovery_procedures.html"
  },"24": {
    "doc": "3 Architecture",
    "title": "3. VBO365 Architecture",
    "content": "3.1. Simple Deployment Architecture . The simple deployment model allows a consolidated architectural approach to be sensitive to associated costs. This model can potentially support up to 16,000 objects before it should be scaled out. 16,000 objects equates to about 6,000 users based on Section 2.1 assumptions. It requires only 1 VM and 1 object storage container/bucket for the simplest deployment, however it is recommended to provision a container/bucket per tenant for better management and segregation of data from an object storage prospective, as well as easier reporting of storage consumption per tenant. The single server contains the VBO365 Management Role, Proxy Role, and hosts the Metadata Repository. Folders should be created for each repo within the object storage container/bucket for each retention policy assigned to each tenant, which maps to its block storage repository. Leverage a VNet Service Endpoint to minimize egress costs from the VNet to Azure Blob. 3.2. Architecture for Microsoft CSPs . Microsoft CSP’s can run the VBO environment in a non-CSP tenant account, however can provision Azure Blob Containers/Buckets from within CSP tenant accounts. This requires the creation of a Container/Bucket per tenant. The compute would run in a centralized shared services subscription while data is driven directly to a CSP Tenant’s Container/Bucket. This means that the shared services would centrally run in a non-CSP tenant subscription but a tenant’s data would live within their own CSP tenant subscription. 3.3. Simple/CSP Deployment Architecture Diagram . 3.4. 1000 User Requirements . From Section 2.2.4, 1000 users translate to approximately 2590 objects. Minimum requirements call for 4 Cores / 8GB of RAM which can process about 2000 objects. The suggested Azure VM size is an D4s v3 , as this should still be appropriate since the VBO365 management requirements would not require the full 4 Cores/8GB RAM of only 2,590 objects. However, the server should still be closely monitored as it scales up. The operating system disk should be Premium SSD. A Windows 2016 Server Template uses a P10 disk which is 128GB storage space. Refer to Section 2.3.1 for Metadata sizing to determine the appropriate managed disk size. From this section it can be determined that 64GB of storage space is needed. A managed disk, Premium SSD, P6 disk size is recommended. ",
    "url": "/docs/vbo/blueprint_azure/3_architecture.html#3-vbo365-architecture",
    "relUrl": "/vbo/blueprint_azure/3_architecture.html#3-vbo365-architecture"
  },"25": {
    "doc": "3 Architecture",
    "title": "3 Architecture",
    "content": "(click to expand table of contents) . | 3. VBO365 Architecture . | 3.1. Simple Deployment Architecture | 3.2. Architecture for Microsoft CSPs | 3.3. Simple/CSP Deployment Architecture Diagram | 3.4. 1000 User Requirements | . | . ",
    "url": "/docs/vbo/blueprint_azure/3_architecture.html",
    "relUrl": "/vbo/blueprint_azure/3_architecture.html"
  },"26": {
    "doc": "3 Sizing Assumptions",
    "title": "Blueprint Data Sizing Assumptions",
    "content": "This section details sizing assumptions for reference based on 1000 Users. 1000 users are assumed to have the number of objects tabulated below: . | Office 365 Object | Quantity | . | Exchange Mailboxes | 1000 | . | Exchange Archive Mailboxes | 500 | . | Exchange Shared Mailboxes | 75 | . | OneDrive’s | 1000 | . | SharePoint Personal Sites | 0 | . | SharePoint Shared Sites | 15 | . | Total Number of Objects | 2590 | . The following provides an assumed per user and total space consumption for Office 365 users. | Office 365 Object | Quantity | . | Office 365 User Data Size | 10 GB | . | Office 365 1000 User Data Size | 10 TB | . These assumptions provide a reference point to extrapolate sizing for any number of users to protect. 1000 users could generate about 2,590 objects and utilize about 5TB of storage space assuming 5 GB consumed per user. Deviations from this assumption will increase storage consumption. Plan accordingly! . Based on the previously stated object assumption, the following table was derived, providing a translation of the number of users to objects. Utilize this table to estimate the number of objects protected for a given quantity of users. This data will subsequently be used to determine the number of total Proxy servers needed to process a given workload. | Number of Users | Est. Number of Objects | . | 500 | 1,295 | . | 750 | 1,943 | . | 1,000 | 2,590 | . | 3,000 | 7,770 | . | 5,000 | 12,950 | . | 6,000 | 15,540 | . | 7,500 | 19,425 | . | 10,000 | 25,900 | . | 20,000 | 51,800 | . | 40,000 | 103,600 | . | 50,000 | 129,500 | . | 60,000 | 155,400 | . Object Storage Cache requirements . As detailed above block storage, attached to proxy servers, can be allocated to Backup for Office 365 repositories. The estimated sizing for the aggregate of the cache required is 1 – 1.5% of the original Office 365 data. Additionally, backed-up data may be reduced by 40-55% depending on the object type. The following table provides estimated storage space required for the cache volume. | Num of Users | M365 Data (TB) | Estimated (1.1%) Required Cache (GB) | Backed-up data after ~45% data reduction (TB) | . | 500 | 5.0 | 55.0 | 3.25 | . | 750 | 7.5 | 82.5 | 4.88 | . | 1,000 | 10.0 | 110.0 | 6.50 | . | 3,000 | 30.0 | 330.0 | 19.50 | . | 5,000 | 50.0 | 550.0 | 32.50 | . | 6,000 | 60.0 | 660.0 | 39.00 | . | 7,500 | 75.0 | 825.0 | 48.75 | . | 10,000 | 100.0 | 1,100.0 | 65.00 | . | 20,000 | 200.0 | 2,200.0 | 130.00 | . | 40,000 | 400.0 | 4,400.0 | 260.00 | . | 50,000 | 500.0 | 5,500.0 | 325.00 | . | 60,000 | 600.0 | 6,600.0 | 390.00 | . Your sizing mileage may vary . It is important to remember that the sizing details provided above will vary per Tenant. Listed below are a number of Veeam and community-supported resources which may be used to more accurately predict the current storage usage (in O365) and in-turn the backup storage and compute resources required. | Veeam Best Practice sizing guide – this guide is intended to provide best practices for Veeam Backup for Microsoft Office 365 &gt; https://bp.veeam.com/vb365/guide/design/sizing/ | CloudOasis – This automated sizing calculator includes VCSP specific information. Simply login with an authenticated user from your Tenant organization &gt; https://cloudoasis.com.au/lab-2/ | DomaLab - If you are unable to acquire the Tenant credentials for access to the live O365 organization, but have access to raw sizing data, this online calculator will help predict the resource requirements &gt; https://domalab.com/365Calc/ | . ",
    "url": "/docs/vbo/blueprint/3_sizing_assumptions.html#blueprint-data-sizing-assumptions",
    "relUrl": "/vbo/blueprint/3_sizing_assumptions.html#blueprint-data-sizing-assumptions"
  },"27": {
    "doc": "3 Sizing Assumptions",
    "title": "3 Sizing Assumptions",
    "content": "(click to expand table of contents) . | Blueprint Data Sizing Assumptions . | Object Storage Cache requirements | Your sizing mileage may vary | . | . ",
    "url": "/docs/vbo/blueprint/3_sizing_assumptions.html",
    "relUrl": "/vbo/blueprint/3_sizing_assumptions.html"
  },"28": {
    "doc": "3 SOBR Considerations",
    "title": "SOBR thoughts",
    "content": ". | Cannot be used for configuration backups or replication seeding | Although you can mix repository types, this should not be done for normal usage. This should only be used to move to a new type of extents via the Evacuate Extent or Sealed Mode option. | If using ReFS or XFS – Data Locality mode is required in order to use the Block Cloning and see space savings. | Performance mode can help reduce I/O impact on repositories that are not ReFS/XFS | . To preserve the consistency of backup chains on the Scale-out Backup Repository™, select the Perform full backup when required extent is offline check box. If an extent that contains previous restore points from the current backup chain goes offline, the backup chain will be broken. Veeam Backup &amp; Replication will not be able to add a new incremental backup file. With this option enabled, Veeam Backup &amp; Replication will create a full backup file instead of an incremental backup file. Note: If you enable this option, you must make sure that you have enough free space on the Scale-out Backup Repository to host a full backup file. Cloud Connect Extent considerations . Planned maintenance: . | Put the Extent into Maintenance Mode. This will allow currently running jobs to that Extent to complete before the Extent goes offline. | Disable the Tenant. This will let currently running Tenant jobs to finish but not allow new jobs to start. | . Unplanned outage considerations: . | Uncheck the Perform full Backup when required extent offline This will allow tenant copy jobs to send backups to VCSP without having to send an active full backup. This can help save space and time. However, it could cause issues with restores if a normal extent is unavailable. | . Extent Evacuation will move all backups from one Extent to another Extent — it cannot move a partial amount off the Extent. Also, this will cause heavy I/O usage as backups are read off one Extent and written to another . Sealed Mode allows recovery and merges to happen, but no new backups are written, therefore backups will age off. This is a better option than Evacuate if there is a short-term retention policy. Note: This may not be an option for long-term retention or GFS style backups as the extent will still be required for recoveries until ALL data is aged out. In order to make use of block cloning in ReFS and XFS, Data Locality most be used. You can rebalance the data on a SOBR manually by copying/pasting backup files from one extent to another and then running a rescan of the SOBR. | Disable the backup job | Copy folder to the destination extent | Once completed, delete the folder off the full extent | Run a Re-Scan on the Scale-out Backup Repository | Enable the job | . Note: Be aware that if using Block Cloning on ReFS or XFS, the synthetic fulls will hydrate, thus losing any space savings . ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/3_sobr.html#sobr-thoughts",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/3_sobr.html#sobr-thoughts"
  },"29": {
    "doc": "3 SOBR Considerations",
    "title": "3 SOBR Considerations",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/3_sobr.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/3_sobr.html"
  },"30": {
    "doc": "3 Tenant Managed Recovery Procedures",
    "title": "Tenant Managed Recovery",
    "content": "Depending on your Cloud Connect Architecture, choose the correct procedures to allow your Tenant to recover their environment. Tenant managed recovery requires more consideration in order to fully isolate the tenant from other tenants and VCSP environment. Precaution should be taken to be sure necessary security measures are in place to maintain isolation and prevent any tenant access to data or infrastructure that is not allocated to them. | Windows Based Repository | Linux Based Repository | SAN/LUN Repository | Object Storage Repository | Cloud Gateway/Gateway Pool Recovery | . Windows Based Repository . | Determine Windows Folder Location for Tenants data | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to Windows Repository server | Add Windows Repository to Tenant Backup Server . | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Give Tenant access to Veeam Backup Server | Tenant can perform Instant Recoveries/Full Recoveries DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Linux Based Repository . | Determine Linux Folder Location for Tenants data | Verify network connectivity from created Tenant Backup server under Basic Step 4 to Linux Repository server | Add Linux Repository to Tenant Backup Server . | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Give Tenant access to Veeam Backup Server | Tenant can perform Instant Recoveries/Full Recoveries DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . SAN/LUN Repository . | Determine SAN/LUN volume on storage device for Tenants data | Create a snapshot of volume | Present storage snapshot as storage for repository | Verify network connectivity from created Tenant Backup server under Basic Step 4 to storage snapshot location presented | Add storage snapshot presented as Repository to Tenant Backup Server . | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Give Tenant access to Veeam Backup Server | Tenant can perform Instant Recoveries/Full Recoveries DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Object Storage Repository . | Determine Object Bucket/Folder Location for Tenants data | Verify network connectivity from created Tenant Backup server under Basic Concept Step 4 to Object Storage location | Add the Object location as a Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . Cloud Gateway/Gateway Pool Recovery . | Create Cloud Gateway pool based on local LAN inside VCSP Environment | Pause Tenant jobs to Cloud Connect | Switch Tenant Cloud Connect access to use the LAN Cloud Gateway Pool | Verify network connectivity from created Tenant Backup server under Basic Step 4 to Object Storage location | Add the Object location as a Repository to Tenant Backup Server This will prevent any issues with different versions/patch levels between VCSP VCC Veeam Backup server and Tenant Veeam Backup server and not push backup components to Repository Server. | Be sure to limit access to just the Tenant Folder location! . | When adding, check the box to Import existing backups . | . | Restore Tenant Configuration File if available | Perform Instant Recovery or Full Recovery into dedicated Tenant recovery environment | Present environment to Tenant thru VPN/MPLS/Portal access DO NOT WRITE ANY BACKUPS INTO REPOSITORY! | . | DR Test – environment can be destroyed . | DR Event – VCSP should create another repository to write backups to during DR event . | . ",
    "url": "/docs/vcc/tenant_restore/3_tenant_recovery_procedures.html#tenant-managed-recovery",
    "relUrl": "/vcc/tenant_restore/3_tenant_recovery_procedures.html#tenant-managed-recovery"
  },"31": {
    "doc": "3 Tenant Managed Recovery Procedures",
    "title": "3 Tenant Managed Recovery Procedures",
    "content": " ",
    "url": "/docs/vcc/tenant_restore/3_tenant_recovery_procedures.html",
    "relUrl": "/vcc/tenant_restore/3_tenant_recovery_procedures.html"
  },"32": {
    "doc": "4 Authentication",
    "title": "4. Authentication and Security",
    "content": "4.1. Modern Authentication . When using this method, Veeam Backup for Microsoft Office 365 uses an Azure AD application for an authentication process against the Office 365 organizations with enabled security defaults; you cannot use a user account with the modern authentication method. Multi-factor authentication would be enabled. 4.2. Modern Authentication with Legacy Authentication Protocols . When using this method, you can use both the user account and the Azure AD application to authenticate against your Office 365 organizations with disabled security defaults. Microsoft is planning to cease the use of legacy authentication. 4.3. Basic Authentication . When using this method, you are required to provide a user account and its password to authenticate against your Office 365 organization. See the help section for more info: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_add_office365_org.html?ver=40 . ",
    "url": "/docs/vbo/blueprint_azure/4_authentication.html#4-authentication-and-security",
    "relUrl": "/vbo/blueprint_azure/4_authentication.html#4-authentication-and-security"
  },"33": {
    "doc": "4 Authentication",
    "title": "4 Authentication",
    "content": "(click to expand table of contents) . | 4. Authentication and Security . | 4.1. Modern Authentication | 4.2. Modern Authentication with Legacy Authentication Protocols | 4.3. Basic Authentication | . | . ",
    "url": "/docs/vbo/blueprint_azure/4_authentication.html",
    "relUrl": "/vbo/blueprint_azure/4_authentication.html"
  },"34": {
    "doc": "4 Certificate Management",
    "title": "Certificate Management",
    "content": "Signed certificates from a publicly trusted Certificate Authority should be used for any production environment. Both applications used in this blueprint leverage certificates. The Cloud Connect server manages the certificate presented during self-service restore operations. Cloud Connect Certificate . Tenants will interact with the Cloud Connect server when performing self-service restore activities as described above. This certificate is presented to the client when connecting to a “Service Provider” in the Backup and Replication interface. Information regarding how certificates are leveraged with Cloud Connect can be found here: https://helpcenter.veeam.com/docs/backup/cloud/cloud_connect_ssl.html?ver=100 . Information regarding how to manage the certificate used with Cloud Connect can be found here: https://helpcenter.veeam.com/docs/backup/cloud/cloud_connect_manage_ssl.html?ver=100 . Backup for Office 365 Tenant Self-Service . Veeam Backup for Office 365 will be configured, in this blueprint, for self-service restores via a general option in the “authentication” tab. Tenant authentication is required to view and recover backups that are located on the service provider side. A certificate must be used to enable this option. Detailed instructions can be found here: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_authentication_settings.html?ver=40 . Backup for Office 365 Modern Authentication . Veeam Backup for Office 365 will be configured, in this blueprint, to use Modern Authentication to interact with Office 365. Detailed permissions and requirements can be found here: https://helpcenter.veeam.com/docs/vbo365/guide/azure_ad_applications.html?ver=40 . ",
    "url": "/docs/vbo/blueprint/4_certificate_management.html#certificate-management",
    "relUrl": "/vbo/blueprint/4_certificate_management.html#certificate-management"
  },"35": {
    "doc": "4 Certificate Management",
    "title": "4 Certificate Management",
    "content": "(click to expand table of contents) . | Certificate Management . | Cloud Connect Certificate | Backup for Office 365 Tenant Self-Service | Backup for Office 365 Modern Authentication | . | . ",
    "url": "/docs/vbo/blueprint/4_certificate_management.html",
    "relUrl": "/vbo/blueprint/4_certificate_management.html"
  },"36": {
    "doc": "4 Job Mode Consideration",
    "title": "Job modes and their I/O impact",
    "content": "For a generic overview for I/O impact of the backup modes, please see this table: . | Method | I/O impact on destination storage | . | Forward incremental | 1 x write I/O for incremental backup size | . | Forward incremental, active full | 1 x write I/O for total full backup size | . | Forward incremental, transform | 2 x I/O (1x read, 1x write) for incremental backup size | . | Forward incremental, synthetic full | 2 x I/O (1x read, 1x write) for entire backup chain | . | Reversed incremental | 3 x I/O (1x read, 2x write) for incremental backup size | . | Synthetic full with transform to rollbacks | 4 x I/O (2x read, 2x write) for entire backup chain | . For more details on Job modes and I/O, please review the best practice information located here: . https://bp.veeam.com/vbr/VBP/4_Operations/O_Veeam_Jobs/O_backup_jobs/backup_job_methods.html . ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/4_copy_job_consideration.html#job-modes-and-their-io-impact",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/4_copy_job_consideration.html#job-modes-and-their-io-impact"
  },"37": {
    "doc": "4 Job Mode Consideration",
    "title": "4 Job Mode Consideration",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/4_copy_job_consideration.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/4_copy_job_consideration.html"
  },"38": {
    "doc": "5 Dedupe Appliance Considerations",
    "title": "Dedupe appliance considerations",
    "content": "https://www.veeam.com/kb1745 . To optimize the deduplication storage performance, select at least one GFS restore point (weekly backup is mandatory for deduplication storages). Enable the “Read the entire restore point from source backup instead of synthesizing it from increments” option to avoid creating synthetic restore points from the deduplication storage (data rehydration). | HPE StoreOnce Catalyst / Dell EMC DataDomain DDboost + copy over WAN + backup copy job: | . The previously described option provides fast processing in situations that do not involve transport over WAN links. Also, optimized integration with Catalyst and Dell EMC DDBoost allows using synthetic processing. For these environments, uncheck the “Read the entire restore point from source backup instead of synthesizing it from increments,” but leave the weekly GFS backup enabled. | Special scenarios based on vendor guidelines + backup job with active full or synthetic full backup: | . The above vendor best practices and design guides mention situations where a deduplication storage can be used as a primary backup target. Depending on the guidelines, select the incremental backup mode with active or synthetic full backup. When ExaGrid is used as a primary backup target, it is recommended to enable GFS processing with it. Please see best practices for ExaGrid. Inline deduplication . Disable inline deduplication setting when writing into deduplication storages. However, for deduplication devices that have a non deduplicated landing zone (Like ExaGrid) and back up only VMs, you can save some space. To do this, enable inline deduplication. Compression . By default, the Veeam source DataMover (Veeam proxy or agent) compression level is set to “optimal” to reduce data that needs to be transported over the network. The repository or the gateway server will decompress the data before storing it to the deduplication device. For backup copy jobs, set the compression level to “Auto” to leave the data in the way it was stored originally on the primary backup target. Dedupe settings may check the Decompress Backup Files Before Storing Setting, this setting allows the proxy/agent to compress the data before sending over the LAN to the repo, then decompress before storing to allow better dedupe ratio on the appliance. Block size defaults . Only two of the block size settings are recommended for deduplication storage usage at VM backups: . | Storage optimization: Local target (large blocks) | . Use this option for any general deduplication storage / HPE StoreOnce Catalyst / Dell EMC DataDomain DDboost / Quantum DXi. | Storage optimization: Local target | . Use this option for ExaGrid. ExaGrid has built-in DataMover, so firewall ports to copy out to another repo (like Cloud Connect) need to be open from the ExaGrid IP address. Block alignment . By default, this advanced repository setting is disabled. Enable it for deduplication storages that work with fixed block length deduplication (e.g. NetApp ONTAP deduplication) or in situations where you can use ReFS/XFS Fast Cloning. Encryption . Encryption will create random data at the backup targets; as a result, the deduplication storages will not work effectively. It is recommended to not use encryption with deduplication storages. Health check . Health check reads all the data from the last restore point and across the backup chain. When used with deduplication storages, this data is rehydrated from the storage which may be a slow process. It is recommended to enable health check on the primary backup job before data is transported by backup copy job to a deduplication storage. Veeam defragmentation and compact settings . If you followed the above described guidelines, you do not need these settings. It is recommended that you disable them. ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/5_dedupe.html#dedupe-appliance-considerations",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/5_dedupe.html#dedupe-appliance-considerations"
  },"39": {
    "doc": "5 Dedupe Appliance Considerations",
    "title": "5 Dedupe Appliance Considerations",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/5_dedupe.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/5_dedupe.html"
  },"40": {
    "doc": "5 Deploying the RA",
    "title": "Blueprint Deployment",
    "content": "This section provides details for a “Day 1” deployment that attains simple scaling and efficient storage consumption with an eye towards the least challenging long term growth strategy. Systems to Deploy and initial Assumptions . | Role | CPU* | RAM (GB)* | Disk Usage (GB) | Network | SQL | . | Cloud Connect Server/VBO Server | 8 | 12 | 100 | Management | SQL Express | . | Cloud Gateway | 2 | 4 | 64 | DMZ |   | . | Backup for Office 365 Proxy #1 | 4 | 8 | Disk 1: 64Disk 2: ** | Management or O365 proxy network |   | . * These figures are recommended minimums. ** Disk 2 will be used to store the O365 metadata for each Tenant. The capacity required will be based on the total protected capacity. | Num of Users | Est. Num of Objects | Proxy CPU | Proxy RAM (GB) | . | 750 | 1943 | 4 | 8 | . | 6000 | 15040 | 8 | 32 | . The tables above display the estimated amount of both users &amp; objects that can be backed up by the dedicated proxy (#1 above). For simplicity’s sake the minimum recommended compute resources have been defined. Cloud Connect Server and Cloud Gateway Deployment . | Review documented requirements: . | Veeam Backup and Replication - Microsoft Windows Server | Veeam Backup and Replication - Cloud Gateway | Veeam Backup for Office 365 | . | Install of Backup and Replication . | Backup and Replication Deployment | . | Obtaining your Veeam Cloud Connect License Key . | This blueprint recommends that this Veeam Cloud Connect deployment is not providing any additional services beyond self-service Microsoft Office 365 recovery. E.g., Do not provide Cloud Connect Backup or Cloud Connect Replication services from this Backup and Replication deployment. | . | Install Backup for Office 365 . | Backup for Office 365 Deployment | . | Add and configure an additional Proxy . | Reminder: We do not recommend using the default Proxy. This will be your “first” Proxy that will be used when creating Backup Jobs. | Backup Proxy Servers | . | . ",
    "url": "/docs/vbo/blueprint/5_deploying.html#blueprint-deployment",
    "relUrl": "/vbo/blueprint/5_deploying.html#blueprint-deployment"
  },"41": {
    "doc": "5 Deploying the RA",
    "title": "5 Deploying the RA",
    "content": "(click to expand table of contents) . | Blueprint Deployment . | Systems to Deploy and initial Assumptions | Cloud Connect Server and Cloud Gateway Deployment | . | . ",
    "url": "/docs/vbo/blueprint/5_deploying.html",
    "relUrl": "/vbo/blueprint/5_deploying.html"
  },"42": {
    "doc": "5 Deployment",
    "title": "5. VBO365 in Azure Deployment Runbook for 1000 Users",
    "content": "The Microsoft Azure Marketplace provides a template in which a VBO365 server can be deployed. While the marketplace appliance is regularly updated, it is possible there is a short lag between new Veeam software version releases and the version available in marketplace template. Two options for deployment is via the marketplace followed by applying an update as needed, or manual VM provisioning and installation of the latest software release. The runbook selections in this section can be applied to either path. This document focuses on the manual deployment, starting with the deployment of a Windows Server from a template and finishing with the installation and configuration of the VBO365 software. 5.1. Provision the Azure VM . | Access the root menu and select “Create a resource”. | Configure Basics options. Use existing or create a new Resource Group, specify a Virtual Machine Name, and specify a Region. Based on Section 3.4, change the VM size to an F4s V2. | Provide credentials. Specify if you have a Windows license. Note: Using your own license provides discounting. For purposes of this document, No is selected for licensing. Click Next. | Select Disk options. Windows Server 2016 Templates includes a 128GB disk for the OS. Select Premium SSD for the OS disk type. For 5TB of Office 365 data, a 64GB SSD disk is required for the backup metadata disk. Select Premium SSD, P6 , No Host Caching, and Managed disk option for the Data disk. Click on “Create and attach a new disk” to configure. The end result should be similar to the following screenshot: . | Specify Networking settings per your preference or leave defaults. Disable Accelerated networking. Load Balancing should remain off. | Specify Management settings per your preference. Boot diagnostics are not required. | There are no Veeam requirements in the Advanced settings. Defaults can be maintained. | Tags can be defined as needed. | Review configuration options and click Create to provision the VM. | . 5.2. Provisioning a Reserved Instance . Reserved Instances can be applied to subscriptions for commitments of 1 or 3 years. This applies discounting to the subscription. | Access the root menu and select “Create a resource”. | In the search bar, type “Reserved VM Instances” and press the Enter key. Click Create to start the wizard. | In the left pane click on “Virtual machine”. The right pane will provide a list of VM sizes to choose from. | Modify the filter for the appropriate region. As this document focuses on Central US, that is the selection depicted below. This document also focuses on a 1 Year Reservation. Therefore, the Term filter needs to be modified since the default is 3 Years, unless 3 Years is preferred. Click the Term filter and select the appropriate commitment year(s) from the dropdown. | The required VM size based on previous section is F4s v2. In the “Filter by name” textbox, type in “F4” and it should produce a list of related VM sizes. Please note, the defined scope determines how the reserved instance is applied, either to be shared across all subscriptions or can be applied to a single subscription, or applied to a resource group to for discounting. Reservation Instances discount compute only, not the operating system. Select the F4s_v2 size and click “Select”. | Optionally, the reservation instance name can be modified if desired. Click Next to review. | Review. Click Buy now to complete the process. | . 5.3. Provision Azure Blob . The use case in this document focuses on leveraging object storage to store VBO365 backup data. | Access the root menu and select “Storage accounts”. | Click on Add. | To select Basic options, confirm the subscription, choose a Resource Group, input a Storage account name, confirm Location, set Account kind to “BlobStorage”, set Replication LRS or GRS, and set Access tier default to “Hot”. Note: Hot tier is suggested because it would liklely be more cost effective to reduce API operational cost. Both hot and cool tiers are supported. LRS and GRS is supported. | Configure Networking, defaults can be maintained. Click Next. | Maintain Data Protection defaults. Click Next. | Configure Advanced. Ensure “Secure transfer required” is enabled and set “Allow Blob public access” to Disabled. Click Next. | Configure Tags if desired. Click Next. | Review and click Create. | Upon deployment, go to the storage resource and click on Containers. | Create a new Container. Input a name of your choice and click Create. It’s suggested to identify the VBO product and tenant name in the naming scheme. | In the Containers menu, click on Access Keys. | Access Keys can be found here. The storage account name and key information will need to be entered in the VBO365 Console (Section 5.13 Step 3) to connect to the object store. | . 5.4. Configure a Service Endpoint . | Navigate to the VBO server in the Azure portal. Then click on the Virtual network/subnet link. | Click on Service Endpoints. | Click Add to add a service endpoint. | Search for Microsoft.Storage option in the filter drop down. | You may select the default subnet unless another one has been created for VBO. This subnet will connect to the blob storage via internal IP address. If a Service endpoint policy exists, you may select it, else it can be left blank since it is optional. Click Add at the bottom when done. | . 5.5. Initialize and Format the Repository Disk . | Login to the VBO365 server and use Disk Manger to create the new data volume. Click Ok to initialize the added data disk. | Both NTFS and ReFS file systems are supported. When using ReFS, the data integrity features should be disabled for volumes where data folders are located, or at least exclude VBO repository files. NTFS is suggested because it does not need any error-prone reconfiguration from the default settings. Storage encryption, dedupe, or compression does always mean added latency on I/O requests, thus we recommend disabling these features for better performance. Complete the wizard to format the volume. | Access the drive and create a folder called “Backups”. | . 5.6. Install Veeam Backup for Microsoft Office 365 . | Please note, if the VM was provisioned using the Azure Marketplace, this section can be skipped. Check for updates and install. This document does not provide steps on updating. Begin the installation process by executing the “Veeam.Backup365_xxxx.msi”. This launches the setup. Click Next to proceed. | Accept license agreements. Click Next. | This dialogue box provides information on the installation paths for each component. Click Next to accept defaults. | Click Install to begin the installation. | This concludes the installation process. Click Finish to complete. | . 5.7. Install Veeam Explorer for Exchange . The Veeam Explorer Tools enable recovery options for VBO365. | Begin the installation process by executing the “VeeamExplorerForExchange_xxxx.msi”. This launches the setup. Click Next. | Accept the software license agreement and terms for 3rd party software components. Click Next. | Defaults maybe maintained. Click Next. | Final opportunity to go back or cancel. Click Install and click Finish when the install is complete. | . 5.8. Install Veeam Explorer for SharePoint . The Veeam Explorer Tools enable recovery options for VBO365. | Begin the installation process by executing the “VeeamExplorerForExchange_xxxx.msi”. This launches the setup. Click Next. | Accept the software license agreement and terms for 3rd party software components. Click Next. | Defaults maybe maintained. Click Next. | Final opportunity to go back or cancel. Click Install and click Finish when the install is complete. | . 5.9. Install Veeam Explorer for OneDrive . The Veeam Explorer for OneDrive is part of the VBO365 installation and does not need to be installed seperately. 5.10. Licensing Veeam Backup for Microsoft Office 365 . | Launch Veeam Backup for Office 365 from the desktop shortcut. Click Connect. | VBO365 will prompt you for a license. Click No if a license is not available, as a license can be installed at a later time and the remainder of this section can be skipped. VBO365 will default to a community license allowing the protection of up to 10 users. Else, click Yes and continue on with this section. Click the Install button to browse to your license file and open. Once opened the license will be installed and will show information such as the following. Press OK to close the licensing window. | . 5.11. Adding a Microsoft 365 Organization with Modern Authentication . Use of Multi-Factor Authentication (MFA) is highly recommend. The following provides a step-through process to add a tenant and automatically enable Modern Authentication. VBO365 v4c (4.0.1.531) and later automates the creation/registration of Azure AD Apps in Microsoft 365 and grants the required permissions. This is accomplished through the VBO365 Console. For prior versions of VBO365; . | Adding tenants with Basic Authentication see Appendix Section 9.1 and skip this section. | Adding tenants with Modern and Legacy Authentication see Appendix Section 9.2 and skip this section. | . | Login to the VBO365 server and launch the application. Click on the Organizations tab in the lower left pane. Then right click on Organizations in the upper left pane and select Add Organization. For a pre-existing Microsoft 365 Organization, right click on it and click “Edit organization”. Confirm the options and click Next. | Confirm the default Region and select Modern Authentication. Leave the “Allow for using legacy authentication protocols” checkbox unchecked. Click Next. Note: If it is required to check legacy authentication checkbox, follow _Appendix Section 9.2_. | Select the “Register a new Azure AD application automatically” radial button. Click Next. | Input a name for the VBO365 application in Azure. For this document, VBO365(4c) in Azure name is chosen as this is the first iteration of VBO365 that provides this functionality. To install a certificate, click Install… . | It is recommend to purchase a certificate from a certificate authority and import. For purposes of this document, a self-signed certificate will be generated. Upon import click Next. | Confirm the Friendly name. For this document, the default self-signed name is used. Click Finish. | Confirm the Name and Certificate. By default, web parts of Microsoft SharePoint sites that belong to Office 365 organization with enabled security defaults have the allowexport property set to false, which prevents Veeam Backup for Microsoft Office 365 from having a direct access to such web parts. If this check box is selected, Veeam Backup for Microsoft Office 365 automatically alters the allowexport property of each web part and sets this property to true. After the allowexport property is set to true, a web part can be backed up. Refer to the folloiwng link for more info; Register Azure AD Application. Per Release Notes, for organizations added using modern authentication with disabled legacy protocols, SharePoint Web Parts export mode can only be changed automatically if such type of a property is supported and can be modified in the source SharePoint Online site or OneDrive account. Click Next. | Follow the instructions to sign in. Copy code and click the link to open the sign-page or provide the code to the tenant to login on the your (the service provider’s) behalf. Paste the code and click Next. | If more than 1 account is listed, choose the appropriate service account to login. | Enter the password. Click Sign in. | You may be required to approve on an MFA device. If so, follow prompts. The result should be: . Close the window. | A message should indicate authentication. Click Next. If these steps were completed per Section 5.9, click here to go back. | VBO365 will create the Azure AD application and configurations. Click Finish. | . 5.12. Managing Backup Azure AD Applications for SharePoint/OneDrive . When using Modern Authentication, backup accounts are not needed. Rather Azure AD Applications are used to access Microsoft 365 Data. To minimize throttling, VBO365 iterates through each added Azure AD Application to access Microsoft 365 resources and to fetch data from the organization. It is recommended to create additional AD Applications to minimize Microsoft throttling when backing up SharePoint and OneDrive and scale by 8 applications at a time. The following is a procedure on creating the Azure AD Applications via the VBO365 Console. | In the VBO365 Console, in Organizations right click on the tenant organization and select Manage backup applications. | Click on Create. | Input a Name, install a certificate, and set the number of applicatoins to create. In this case, 8 instances of the Azure AD Application will be created with the same name and certificate. Click Next. | Follow Steps 8 – 12 in Section 5.5. The result should be similar to the following graphic. Click Finish. | Confirm completion of the AD App creation. Click Ok. | The folowing depicts the result in Azure AD. | . 5.13. Create a Tenant Object Storage Repository . | Click on Backup Infrastructure in the bottom left pane and then select on Object Storage Repositories. Click on Add Object Storage in the ribbon menu. Enter a name for the object storage repo. It is suggested to include the tenant name, retention, and backup type (item or snap) in the naming scheme. Click Next. | Select Microsoft Azure Blob Storage. Click Next. | Click Add to specify account credentials. Input the Account and Shared key information. Account is the “storage account name” and Shared key is “Key1” from the Azure portal, Section 5.3 Step 12. Click Ok. | Maintain the default selection for the Regoin . Click Next. | Confirm the selected Container. Click Browse and then New Folder to create a folder for the tenant. The suggested folder name should at least reflect retention and backup type (item or snap). Click Ok and then Advanced. | Depeding on teant purchased subscription, they me be allowed unlimited storage or have a finite amount of storage for their backups. Under Advanced, the limit can be configured. Check the “Limit object storage consumption to” checkbox and specify capacity. Then click Ok. Based on assumptions in Section 2.3.1, 1000 users is expected to generate about 3.25 TB of backup data. When a change rate is known, the storage required can be predicted. For the purposes of this document, 4 TB is chosen. If the checkbox is left unchecked, the tenant will be allowed to go beyond the expected storage consumption. Service Provider business model typically dictates the selection of this option and billing is applied accordingly per business model. Click Ok. | The final step in the wizard should look like the following. Click Finish. | . 5.14. Configure a Tenant Backup Repository . This is the over-arching repository layer that encompasses/maps to the tenant object storage. It will hold metadata information and will serve as the targeting point for VBO365 jobs, which will relay data to the object storage. | Click on Backup Repositories in the Backup Infrastructure tab. Then click “Add Repository” in the ribbon menu at the top. Input a name. The name should reflect the name of the tenant and retention policy. You may wish to also include the type of repository in the name (item or snap). Click Next. | Confirm Backup Proxy and click Browse to browse a path. Click New Folder to create the tenant folder. It’s recommended the folder name include the tenant name, retention, and backup type (item or snap). Click Ok and then Next. | Check the Offload backup data to object storage” checkbox and select the tenant folder. Add or select a password if enabling encryption. Click Next. | Select a retention policy. In this case we will select 1 year. By default, the retention policy is applied at 12AM daily to check for expired emails under the Advanced configuration. This document focuses on Snapshot-Based retention and so that is what is selected. Click Finish. | . Note: For cost-efficiency, snapshot-based retention is recommended for object storage to minimize API cost for both backing up data and recovering data. 5.15. Create a Backup Job . | Right click on the organization and click Add to backup job. Specify a job name and description. The suggested name should include the tenant name, retention, backup type, and perhaps application type if jobs are being segregated by that category (Exchange, Sharepoint, Onedrive). Click Next. | If selecting “Backup up the following objects”, click Add to select a more custom approach. This document assumes a Backup of the entire organization is selected. Click Next. | Objects can be excluded. Click Next. | Confirm and specify the backup repository. Click Next. | Confirm scheduling selections. Click Create and Run the job. Congratulations! You’ve completed the deployment of VBO in Azure and have created the 1st job! . | . 5.15.1. Recommended Job Practice Notes . | Jobs should not contain more than 2000 objects, which is equivalent to about 750 users based on previously defined assumptions. Jobs can be divided by application to meet this recommendation. | To reduce the number of objects being backed up on a per job basis, for ease of management, and to separate how processing is done (Mailbox vs SharePoint/OneDrive), create separate jobs based on application items such as Exchange, OneDrive, and SharePoint. | . | Only 1 bucket/container is technically required with tenant folders mapping to each tenant repository. However, the recommendation is to create a bucket/container per tenant and retention folders underneath. | . ",
    "url": "/docs/vbo/blueprint_azure/5_runbook.html#5-vbo365-in-azure-deployment-runbook-for-1000-users",
    "relUrl": "/vbo/blueprint_azure/5_runbook.html#5-vbo365-in-azure-deployment-runbook-for-1000-users"
  },"43": {
    "doc": "5 Deployment",
    "title": "5 Deployment",
    "content": "(click to expand table of contents) . | 5. VBO365 in Azure Deployment Runbook for 1000 Users . | 5.1. Provision the Azure VM | 5.2. Provisioning a Reserved Instance | 5.3. Provision Azure Blob | 5.4. Configure a Service Endpoint | 5.5. Initialize and Format the Repository Disk | 5.6. Install Veeam Backup for Microsoft Office 365 | 5.7. Install Veeam Explorer for Exchange | 5.8. Install Veeam Explorer for SharePoint | 5.9. Install Veeam Explorer for OneDrive | 5.10. Licensing Veeam Backup for Microsoft Office 365 | 5.11. Adding a Microsoft 365 Organization with Modern Authentication | 5.12. Managing Backup Azure AD Applications for SharePoint/OneDrive | 5.13. Create a Tenant Object Storage Repository | 5.14. Configure a Tenant Backup Repository | 5.15. Create a Backup Job . | 5.15.1. Recommended Job Practice Notes | . | . | . ",
    "url": "/docs/vbo/blueprint_azure/5_runbook.html",
    "relUrl": "/vbo/blueprint_azure/5_runbook.html"
  },"44": {
    "doc": "6 Adding a Tenant",
    "title": "Adding your first tenant",
    "content": "This section provides details for creating the first Office 365 Repositories, Object Storage Repositories, Organizations, Jobs, and Cloud Connect Tenant for self-service restores. These details are items to consider for each and every Organization added to this multi-tenant Backup for Office 365 install. | Obtain credentials or plan for authentication . | Permission Requirements | . | Add Tenant specific Object Storage Repository | Add Tenant specific Backup Repository . | Make sure to extend this Backup Repository to the Tenant specific Object Storage Repository created above. | . | Add Organization | Create Tenant Jobs . | Veeam Best Practices recommend that a new job is defined for each Object Type (E-mail, Archive, SharePoint &amp; OneDrive). | For additional details see the recommendations here: VBO Job Configuration | . | Add Cloud Connect Tenant . | Create a Cloud Connect Tenant in Backup and Replication that end-users are able to utilize for self-service restores. | Provide unique Cloud Connect credentials to each tenant Organization. These credentials will be used during tenant self-service restores. | Registering Tenant Accounts | . | . ",
    "url": "/docs/vbo/blueprint/6_adding_first_tenant.html#adding-your-first-tenant",
    "relUrl": "/vbo/blueprint/6_adding_first_tenant.html#adding-your-first-tenant"
  },"45": {
    "doc": "6 Adding a Tenant",
    "title": "6 Adding a Tenant",
    "content": " ",
    "url": "/docs/vbo/blueprint/6_adding_first_tenant.html",
    "relUrl": "/vbo/blueprint/6_adding_first_tenant.html"
  },"46": {
    "doc": "6 Job Maintenance Settings",
    "title": "Maintenance tab settings",
    "content": ". | Performing backup file health checks can cause high CPU and I/O utilization on the repository. Be cautious on how frequently health checks are running, how big the backups are, and when they are running from multiple tenants . | “Remove deleted items data” should be checked to remove deleted VMs from backups. This will help lower the amount of Cloud Connect storage usage and depending on how Cloud Connect is licensed to the tenant, the number of VMs needed to report. | Defragment and compact full backup file can have an impact on the I/O of the repository . | If you perform Active Full or Synthetic Full backups on a regular basis, including GFS based backups, it is not necessary to check this. | Requires enough free space equal to the size of the total full backup file space on the repository. | . | . ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/6_job_maintenance.html#maintenance-tab-settings",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/6_job_maintenance.html#maintenance-tab-settings"
  },"47": {
    "doc": "6 Job Maintenance Settings",
    "title": "6 Job Maintenance Settings",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/6_job_maintenance.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/6_job_maintenance.html"
  },"48": {
    "doc": "6 Monitoring",
    "title": "6. Monitoring a Backup",
    "content": "6.1. Viewing Job Statistics . The highlighted below provides information on the amount of data processed and the number of objects backed up. ",
    "url": "/docs/vbo/blueprint_azure/6_monitoring.html#6-monitoring-a-backup",
    "relUrl": "/vbo/blueprint_azure/6_monitoring.html#6-monitoring-a-backup"
  },"49": {
    "doc": "6 Monitoring",
    "title": "6 Monitoring",
    "content": "(click to expand table of contents) . | 6. Monitoring a Backup . | 6.1. Viewing Job Statistics | . | . ",
    "url": "/docs/vbo/blueprint_azure/6_monitoring.html",
    "relUrl": "/vbo/blueprint_azure/6_monitoring.html"
  },"50": {
    "doc": "7 Backup Copy Job Settings",
    "title": "Backup copy job details",
    "content": "During the backup copying process, Veeam Backup &amp; Replication does not simply copy a backup file from one backup repository to another. Instead, Veeam Backup &amp; Replication retrieves data blocks necessary to create a restore point as of the latest point in time and copies this data to the cloud repository. This is the default behavior for a backup copy job and helps to reduce the required bandwidth to the target repository. If the “Read the entire restore point from source instead of synthesizing it from increments” checkbox is checked, this behavior is changed which will negate the bandwidth savings. The backup chain produced on the target backup repository is forever incremental: the first file in the chain is a full backup while all subsequent restore points are incremental. For more detail on copy jobs, please see the user guide here: . https://helpcenter.veeam.com/docs/backup/vsphere/about_backup_copy.html?ver=100 . ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/7_backup_copy_settings.html#backup-copy-job-details",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/7_backup_copy_settings.html#backup-copy-job-details"
  },"51": {
    "doc": "7 Backup Copy Job Settings",
    "title": "7 Backup Copy Job Settings",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/7_backup_copy_settings.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/7_backup_copy_settings.html"
  },"52": {
    "doc": "7 Data Recovery",
    "title": "7. Recovering from VBO365",
    "content": "To recovery data from an Office 365 Backup, the Veeam Explorers can be utilized. Note: When providing tenants with self-service capabilities through Cloud Connect with Veeam Explorer tools, tenant Veeam Explorer versions must be the same as the service provider VBO365 Explorer versions. Additionally, if modern authentication is used, then tenant must authenticate using modern authentication as basic will fail. 7.1. Recovering Exchange Items . | Start by right clicking on the tenant organization. | The following warning may be displayed. Choose whether to check the box or not. Click Ok. | Expand the mailbox, expand a user, and click on Inbox. Right click on an email or multiple emails to view the restore options. Clicking the Advanced Find option allows filtering. | . 7.2. Recovering SharePoint Items . | Start by right clicking on the tenant organization. | The following warning may be displayed. Choose whether to check the box or not. Click Ok. | Expand the organization, expand a SharePoint site, and click on an object such as Documents. Right click on a document or multiple documents to view the restore options. Clicking the Advanced Find option allows filtering. | . 7.3. Recovering OneDrive Items . | Start by right clicking on the tenant organization. | The following warning may be displayed. Choose whether to check the box or not. Click Ok. | Expand the mailbox, expand a user, and click on Inbox. Right click on an email or multiple emails to view the restore options. Clicking the Advanced Find option allows filtering. | . ",
    "url": "/docs/vbo/blueprint_azure/7_data_recovery.html#7-recovering-from-vbo365",
    "relUrl": "/vbo/blueprint_azure/7_data_recovery.html#7-recovering-from-vbo365"
  },"53": {
    "doc": "7 Data Recovery",
    "title": "7 Data Recovery",
    "content": "(click to expand table of contents) . | 7. Recovering from VBO365 . | 7.1. Recovering Exchange Items | 7.2. Recovering SharePoint Items | 7.3. Recovering OneDrive Items | . | . ",
    "url": "/docs/vbo/blueprint_azure/7_data_recovery.html",
    "relUrl": "/vbo/blueprint_azure/7_data_recovery.html"
  },"54": {
    "doc": "7 Self-Service Restores",
    "title": "Self-Service Restores",
    "content": "This section details the requirements and considerations to provide Tenant self-service restores from backed-up Backup for Office 365 data. This section further illustrates the guidance provided here: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_baas_tenant.html?ver=40 . Required Software . Each Tenant will require access to two pieces of Veeam software to perform self-service restore operations. | A Veeam Backup and Replication Server | The installation of at least one Veeam Explorer, e.g., Veeam Explorer for Microsoft Exchange. | . Optionally, a 64-bit version of Microsoft Outlook provides for the export of data into .pst &amp; .msg files. This consideration is further detailed here: https://helpcenter.veeam.com/docs/vbo365/guide/vex_considerations.html?ver=40 . The combination of software above provides two key functions: . | The ability to securely connect a Tenant to a Cloud Connect Provider (VCSP). | Via the relevant Veeam Explorer, the ability to browse, search, and recover backed-up Office 365 data. | . Installing the Tenant environment . For the sake of simplicity, the minimum recommended system sizes are displayed below. | Role | CPU | RAM (GB) | Disk (GB) | . | VBR Server | 2 | 8 | 60 | . | Veeam Explorer for Exchange/SharePoint/OneDrive | n/a | 4 | n/a | . | Install Backup and Replication: . | Requirements | Backup and Replication Install | Backup and Replication Console Install | . | Add a Service Provider | . Veeam Explorers . If necessary, download or supply to the Tenant the VeeamBackupOffice3654.0.1.531 installation files. The extracted files will contain the VBO Application (not required at the tenant) plus the Explorer for Exchange and Explorer for SharePoint. _You must verify the filenames and version number match the Service Provider installation, or self-service restores will fail. | The first section of this version number identifies the compatible Backup and Replication release number. | The second section (in this example 519) must match the Service Provider’s Veeam Backup for O365 release number. | . Performing a Self-Service Recovery . There are various ways to recover data from VBO. Depending upon the option chosen, the data recovery path will vary, see below for examples. Recovery is possible with the use of Veeam Explorers. Veeam Explorers ran from the Tenant Backup and Replication environment explore backed-up data by adding the Service Provider’s backups described here: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_vex_adding_store.html?ver=40 . | Launch Location | Explorer Used | Recovery Action | Data Path | . | Tenant Site | VEX | Entire Folder/mailbox compare and restore missing/changed items to online mailbox | Object Store &gt; VBO Proxy &gt; VBO Server &gt; O365 Tenant | . | Tenant Site | VEX | Forward Email item as an attachment | Object Store &gt; VBO Proxy &gt; CCG &gt; Tenant VBR &gt; SMTP Target | . | Tenant Site | VEX | *Save Exchange item as .MSG | Object Store &gt; VBO Proxy &gt; CCG &gt; Tenant VBR &gt; Outlook 64-bit engine | . | VBO Server | VEX | Forward Email item as an attachment | Object Store &gt; VBO Proxy &gt; VBO Server &gt; VBO SMTP Target | . Caption: Export as .MSG or .PST requires installation of Outlook 64-bit client on the Tenant recovery platform. Outlook Client . If you require the ability to export recovered data as .PST files an installation of a 64-bit version of the Outlook client is necessary on the Tenant VBO platform. ",
    "url": "/docs/vbo/blueprint/7_ssr.html#self-service-restores",
    "relUrl": "/vbo/blueprint/7_ssr.html#self-service-restores"
  },"55": {
    "doc": "7 Self-Service Restores",
    "title": "7 Self-Service Restores",
    "content": "(click to expand table of contents) . | Self-Service Restores . | Required Software | Installing the Tenant environment . | Veeam Explorers | . | Performing a Self-Service Recovery . | Outlook Client | . | . | . ",
    "url": "/docs/vbo/blueprint/7_ssr.html",
    "relUrl": "/vbo/blueprint/7_ssr.html"
  },"56": {
    "doc": "8 Business Case",
    "title": "8. Business Case",
    "content": "Microsoft Office 365 is one of the fastest growing software as a service solution for productivity applications today. Users can do away with their own infrastructure reducing their capital expenditures and have access across an array of devices. Microsoft operates on the Office 365 Shared Responsibility Model. The following Veeam article outlines the responsibilities of Microsoft vs the user: . The Office 365 Shared Responsibility Model . Veeam Backup for Office 365 is a solution built from the ground up to provide a multi-tenant data protection solution for Microsoft Office 365 data. It provides the following: . | Protection against Accidental Deletion | Protection against Retention Policy Confusion / Gaps | Protection against Internal Security Threats / Malicious Insiders and Departing Employees | Protection against External Security Threats / Ransomware and Rogue Apps | Maintaining Legal and Compliance Requirements | Managing Hybrid Deployments and Migrations | . VBO365 allows users to meet their responsibilities in protecting their data. This document is aimed at helping service providers protect Microsoft 365 data on behalf of users. It’s provided information on the requirements needed to scale up a VBO365 system as well as scale-out based on a set of educated assumptions. Guidance on architecting the VBO365 solution in a Microsoft Azure environment leveraging Azure Blob while tailoring to Microsoft subscription accounts was defined in this document. This information can be used to form a cost analysis and help to scale the system as the customer base grows. A full runbook provided a step by step process in which such a system can be deployed, reducing implementation time and effort, and establishing service faster! . ",
    "url": "/docs/vbo/blueprint_azure/8_business_case.html#8-business-case",
    "relUrl": "/vbo/blueprint_azure/8_business_case.html#8-business-case"
  },"57": {
    "doc": "8 Business Case",
    "title": "8 Business Case",
    "content": "(click to expand table of contents) . | 8. Business Case | . ",
    "url": "/docs/vbo/blueprint_azure/8_business_case.html",
    "relUrl": "/vbo/blueprint_azure/8_business_case.html"
  },"58": {
    "doc": "8 Conclusion",
    "title": "Conclusion",
    "content": "Some final thoughts on setting up backup storage and job settings, it is important to consider the Advanced settings and repository perfomance beyond just amount of space. There are multiple options for Veeam to use as a repository and hopefully the information in this document can help in making a decision that works best for the overall configuration. This document is not meant to replace Best Practices but to give further thought considerations to help make a decision that works for your business. ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/8_conclusion.html#conclusion",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/8_conclusion.html#conclusion"
  },"59": {
    "doc": "8 Conclusion",
    "title": "8 Conclusion",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/8_conclusion.html",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/8_conclusion.html"
  },"60": {
    "doc": "8 Scaling the platform",
    "title": "Scaling for Speed – Auxiliary Backup Applications",
    "content": "VBO v4 included a technique to improve the speed by which SharePoint and OneDrive data can be extracted from Office 365. This is achieved by launching multiple ‘auxiliary backup applications’. The creation, registration, and permission assignments of these Azure AD Apps is accomplished through the VBO Console. Documentation for creating and editing these accounts can be found here: https://helpcenter.veeam.com/docs/vbo365/guide/adding_backup_accounts.html?ver=40. Day ‘X’ - Scaling the environment . This section provides details for scaling this implementation beyond the day 1 deployment. The table below displays all of the VCSP components required to deliver a self-service capable &amp; multi-tenant solution to approximately 60,000 O365 users. Using this design, there are no limitations on the number of tenant organizations, the data capacity or duration of retention required. As each Proxy approaches its capacity, a new one should be deployed, eventually expanding to 10 Backup for Office 365 Proxies. | Role | CPU | RAM (GB) | Disk (GB) | Network | SQL | . | Cloud Connect / Veeam Backup for Office 365 | 8 | 12 | 100 | Management | SQL Express (from Backup and Replication) | . | Backup for Office 365 Proxy #1 | 8 | 32 | 64 | Management or O365 proxy network |   | . | … | … | … | … | … |   | . | Backup for Office 365 Proxy #10 | 8 | 32 | 64 | Management or O365 proxy network |   | . Tenant Scaling . As previously explained, Tenants can perform self-service actions on their own O365 Organizations using a combination of Veeam Explorers and VBR to securely connect to the VBO service, instigate recovery operations back to O365, and retrieve/export data locally as required. Each Tenant connects to the VCSP Cloud Connect system securely using their own credentials. Multi-Tenant Deployment Limits . As you can see from the table above, the current release of VBO v4 supports a maximum of 10 Proxy Servers. The Day 1 deployment defined the starting point as a single Proxy with 4 CPUs and 8 GB of RAM. This is sufficient to support 750 users or approximately 1943 objects, given the assumptions at the beginning of this document. Assuming that Tenants are likely to grow over time, both by the number of users and by the volume of data they are storing, reasonable headroom should be left within each Proxy to support such growth. Our recommendation is to add additional VBO Proxies when your existing platform begins to reach capacity. For example, if the VBO Proxies regularly run at &gt;= 90% CPU or Memory during backup runs, add an additional proxy. The supported maximum number of Backup for Office 365 proxies is 10. At this point, a second VBO/VCC deployment is needed to provide backup services to additional users. The stated maximums can be found here: https://bp.veeam.com/vb365/guide/design/maxconfig.html . Leveraging Object Storage from Day 1 will circumvent reaching any storage capacity limits related to the Tenant growth. ",
    "url": "/docs/vbo/blueprint/8_scaling.html#scaling-for-speed--auxiliary-backup-applications",
    "relUrl": "/vbo/blueprint/8_scaling.html#scaling-for-speed--auxiliary-backup-applications"
  },"61": {
    "doc": "8 Scaling the platform",
    "title": "8 Scaling the platform",
    "content": "(click to expand table of contents) . | Scaling for Speed – Auxiliary Backup Applications . | Day ‘X’ - Scaling the environment | Tenant Scaling | Multi-Tenant Deployment Limits | . | . ",
    "url": "/docs/vbo/blueprint/8_scaling.html",
    "relUrl": "/vbo/blueprint/8_scaling.html"
  },"62": {
    "doc": "9 Notifications",
    "title": "Notifications",
    "content": "VCSP . Notifications for are configured via the global notification settings menu. This is detailed here: https://helpcenter.veeam.com/docs/vbo365/guide/vbo_notification_settings.html?ver=40 . We recommend integrating e-mail notifications for warnings and failures with a ticketing system of your choice. Configuring e-mail notifications per variables in the subject line allows for an agnostic approach to ticket systems. Tenant . VCSPs recognize the importance of notifying Tenants of the status of backups for their managed services. For notifying Tenants of the status of protected mailboxes we recommend leveraging the Mailbox Protection Report built into Backup for Office 365. Combining the Mailbox Protection Report and a script, per Tenant/Organization, enables the delivery of this report to be delivered to Tenants on an on-going basis. See a sample Windows scheduled task and script paired here: . https://github.com/nielsengelen/veeam-powershell/blob/397e36261895aca2c7ab5a593a725b45d13f0ca9/VBO365-AutomateReportGeneration.ps1 . ",
    "url": "/docs/vbo/blueprint/9_notifications.html#notifications",
    "relUrl": "/vbo/blueprint/9_notifications.html#notifications"
  },"63": {
    "doc": "9 Notifications",
    "title": "9 Notifications",
    "content": " ",
    "url": "/docs/vbo/blueprint/9_notifications.html",
    "relUrl": "/vbo/blueprint/9_notifications.html"
  },"64": {
    "doc": "Automation",
    "title": "Automation",
    "content": "Virtually all Veeam products provide some method of automating their configuration or management whether it’s via RESTful APIs, PowerShell cmdlets, or a built-in CLI. This section contains documents &amp; code samples focused on leveraging these tools to automate Veeam products. Please note that code samples provided are not created by Veeam R&amp;D nor validated by Veeam Q&amp;A. They are maintained by community members which might be or not be Veeam employees. As such, please perform testing and validation prior to using any code or tools mentioned in a production environment. This information is not intended to supersede existing Veeam Technical Documentation, White Papers, or Best Practices. ",
    "url": "/docs/automation/",
    "relUrl": "/automation/"
  },"65": {
    "doc": "Blueprint for Success at Scale",
    "title": "Blueprint for Success at Scale",
    "content": "This document is intended to provide Veeam Cloud &amp; Service Providers (VCSP) a detailed and supported blueprint for the Veeam Backup for Office 365 product when used by Service Providers at scale. There are considerations that should be provided for the deployment and operational cycle of this product for VCSPs that may vary from a typical end-customer. This design will provide the best ability to scale up and out, the highest levels of performance, and abilities to monitor and report on the health of the infrastructure. We aim to provide high levels of service in a multi-tenant environment while also providing end-user self-service restore capabilities. This document is not intended to supersede existing Veeam Technical Documentation, White Papers, or Best Practices. ",
    "url": "/docs/vbo/blueprint/",
    "relUrl": "/vbo/blueprint/"
  },"66": {
    "doc": "Blueprint for Success in Azure",
    "title": "Blueprint for Success in Azure",
    "content": "This document is intended for Veeam Cloud &amp; Service Providers (VCSP) or for those who want to become VCSPs that want to utilize Microsoft Azure for infrastructure and Azure Blob for storage. It provides the architectural and sizing detail needed to understand how to build a Veeam Backup for Microsoft Office 365 (VBO365) system as a service, as well as provide the information necessary to perform a cost analysis for business justification. It also provides runbook steps for deploying VBO365 in a Microsoft Azure environment. While there can be many use cases for different environment sizes, this document focuses the runbook portion on one use case sized for 1000 users to serve as guidance based on a set of educated assumptions. The purpose of this document is to educate a VCSP on how to design and build a VBO365 system in a Microsoft environment, perform a cost analysis, and to get to market as quickly as possible. ",
    "url": "/docs/vbo/blueprint_azure/",
    "relUrl": "/vbo/blueprint_azure/"
  },"67": {
    "doc": "VCSP Documentation Hub",
    "title": "VCSP Technical Documentation Hub",
    "content": "Welcome to the Veeam Cloud &amp; Service Providers (VCSP) Technical Documentation Hub. The information in this site is specifically aimed at Veeam partners in the VCSP program and covers a broad range of topics. It may be a design idea, the best way to use a given feature, pitfalls to avoid, and so on. In general, this information is developed, collected and updated by the VCSP Systems Engineering team working in the field together with VCSP partners. For general documentation or best practices on Veeam software, here are some useful links: . | Veeam Help Center Technical Documentation | Veeam Backup &amp; Replication Best Practices | Veeam Backup for Microsoft Office 365 Best Practices | . ",
    "url": "/docs/#vcsp-technical-documentation-hub",
    "relUrl": "/#vcsp-technical-documentation-hub"
  },"68": {
    "doc": "VCSP Documentation Hub",
    "title": "VCSP Documentation Hub",
    "content": " ",
    "url": "/docs/",
    "relUrl": "/"
  },"69": {
    "doc": "MSP Appliance Guide",
    "title": "Introduction",
    "content": "This document is intended to provide Veeam Cloud &amp; Service Providers (VCSP) and Managed Service Providers (MSPs) a guide for building a Veeam branded appliance. Since Veeam does not have a hardware backup appliance and is just a software offering, providers can choose to build a Veeam branded appliance by using the hardware of their choice. By using the information in this guide, hopefully it will give an idea of what is possible, some possible options to pick from, and can decide which option will work for you and your customers. Based on asking several providers that offer this type of Appliance offering currently, there are basically 3 different architecture options. First let’s look at the 3 options, then dig into possible builds of those options. | Option 1 – All in One physical Server Appliance | Option 2 – Physical server as virtual host with multiple VMs installed. | Option 3 – One physical server and a storage appliance | . Each of these has pros and cons and you need to decide which makes sense for your deployment and ongoing administration. ",
    "url": "/docs/vbr/msp_appliance/#introduction",
    "relUrl": "/vbr/msp_appliance/#introduction"
  },"70": {
    "doc": "MSP Appliance Guide",
    "title": "Option 1 – All in One Physical Server Appliance",
    "content": ". | Current version of Veeam – v12, this must be a Windows server. | All Veeam roles running on this server. | Windows based ReFS or NTFS repository . | Partition hard drives into 2 – 1 for OS and Veeam, 1 – as repository | . | Need to have enough compute for all roles for the overall size of environment. | https://helpcenter.veeam.com/docs/backup/vsphere/system_requirements.html?ver=120 | . | . Pros: . | Simple deployment – just need an IP address from customer. | Ease of management as just 1 OS to patch. | Ease of pricing – server and Windows OS license plus Veeam. | Small footprint if using offsite backup for long term backups. | . Cons: . | One OS is Veeam server and backup data. | If compromised on hardware failure, can lose backup data. | . | No Immutability protection with Windows repository as of v12. | No additional resources for testing restore. | . This would be considered a good solution however without immutability, there is higher risk of losing backup data. Highly recommend 3-2-1 rule of sending backups to an offsite location using either a backup copy job with Immediate Copy(mirroring) or a SOBR Capacity tier with Copy mode enabled. This will help protect from data loss. For best security practice, the offsite copy should be placed onto an Immutable repository. ",
    "url": "/docs/vbr/msp_appliance/#option-1--all-in-one-physical-server-appliance",
    "relUrl": "/vbr/msp_appliance/#option-1--all-in-one-physical-server-appliance"
  },"71": {
    "doc": "MSP Appliance Guide",
    "title": "Option 2 - Physical server as virtual host with multiple VMS installed.",
    "content": ". | Can be any Hypervisor. | 1 Windows VM as Veeam BNR server role. | Other VMs as needed for other roles, can be Linux for proxies, repository. | Can use Linux Hardened Repo | . Pros: . | Can setup with additional resources to allow for SureBackup/DataLab testing. | Local backup Immutability with Linux Hardened Repo. | . Cons: . | Additional overhead of hypervisor. | Still a single hardware server which could be compromised. | Even though Linux hardened repo, it is inside a VM so if Hypervisor compromised, VM disk can be deleted. | . | . This would be considered a better solution with the Linux Hardened Repo as it gives local immutability, however the data is inside a virtual disk which can be compromised at the Hypervisor level. Adding resources to setup SureBackup /DataLab is definitely a great additional add on. Still follow 3-2-1 rule of sending backups to an offsite location using either a backup copy job with Immediate Copy(mirroring) or a SOBR Capacity tier with Copy mode enabled. This will help protect from data loss. For best security practice, the offsite copy should be placed onto an Immutable repository. ",
    "url": "/docs/vbr/msp_appliance/#option-2---physical-server-as-virtual-host-with-multiple-vms-installed",
    "relUrl": "/vbr/msp_appliance/#option-2---physical-server-as-virtual-host-with-multiple-vms-installed"
  },"72": {
    "doc": "MSP Appliance Guide",
    "title": "Option 3 – One physical server and a storage appliance",
    "content": ". | Physical server (or VM in customer environment). | Runs Veeam BNR and Proxy role. | . | Choose repository appliance. | Could be a dedupe, NAS, SAN, On-prem Object. | . | . Pros: . | Separation of management and storage. | If BNR compromised, backups still usable with new BNR | . | Possible Immutability depending on storage. | . Cons: . | Higher overhead of multiple systems. | No additional resources for testing restore. | . This would be considered the best solution with the separation of components. Storage option with immutability would provide best security option. Still follow 3-2-1 rule of sending backups to an offsite location using either a backup copy job with Immediate Copy(mirroring) or a SOBR Capacity tier with Copy mode enabled. This will help protect from data loss. For best security practice, the offsite copy should be placed onto an Immutable repository. ",
    "url": "/docs/vbr/msp_appliance/#option-3--one-physical-server-and-a-storage-appliance",
    "relUrl": "/vbr/msp_appliance/#option-3--one-physical-server-and-a-storage-appliance"
  },"73": {
    "doc": "MSP Appliance Guide",
    "title": "MSP Appliance Guide",
    "content": " ",
    "url": "/docs/vbr/msp_appliance/",
    "relUrl": "/vbr/msp_appliance/"
  },"74": {
    "doc": "Onboarding",
    "title": "Workflow to add an Organization to Veeam Backup for Microsoft 365",
    "content": "The below workflow follows the process of adding an Organization with Modern App-Only Authentication. While these instructions were written for version 6.0, they can be applied to version 5.0 with minor changes to the API calls used. | Customer inputs data in custom portal/form (not Veeam) . | You can define the data collected in this form according to your business requirements. None of this data is required in order to add the MS Organization to Veeam. | . | Generate the Microsoft userCode &amp; verificationUrl . | Provide both to the customer | . | PAUSE: This is where your workflow pauses and waits for the customer. | The customer accesses the URL where they enter the code provided and authenticate to MS. | Customer authenticating to MS needs to have the Global Administrator role. | . | UNPAUSE: Customer has provided access | Add the Organization to Veeam | At this point, initial onboarding is complete and Backup Jobs can be created to protect Organization data. | . Starting with Veeam Backup for Microsoft 365 6.0, an additional step is required if the Restore Portal is being used. See Veeam documentation step #5. As an alternative, this script can be provided to tenants for this step. API calls involved in the above workflow . Step #2: POST /v6/DeviceCode . Step #6: POST /v6/Organizations . | The userCode from step #2 is also used in this API call. | Generate a self-signed certificate (see sample code below). This certificate is used as a shared secret between you and Microsoft. | . Here’s some recommendations: . | Create a unique certificate for each Organization. This ensures that a single compromised certificate doesn’t compromise all of your tenants. | Store these certificates in a secure location as they will be useful if you ever decide to automate restores. | Use identifiable friendly names | Here’s sample code that can generate a self-signed certificate: | . OpenSSL . openssl req -x509 -newkey rsa:4096 -keyout cert.key -out cert.cer -days 3650 -passout pass:veeam -subj \"/C=US/ST=Kentucky/L=Lexington/O=Veeam Software/OU=VCSP/CN=veeam.contoso.local\" openssl pkcs12 -export -out cert.pfx -inkey cert.key -in cert.cer -passin pass:veeam -passout pass:veeam -name \"Contoso VB365 Tenant\" base64 -i cert.pfx -o vbo-application-certificate.txt . PowerShell . $cert = New-SelfSignedCertificate -Type Custom -KeyExportPolicy Exportable -KeyUsage None -KeyAlgorithm RSA -KeyLength 2048 -HashAlgorithm SHA256 -NotAfter (Get-Date).AddYears(10) -Subject \"/C=US/ST=Kentucky/L=Lexington/O=Veeam Software/OU=VCSP/CN=veeam.contoso.local\" -FriendlyName \"Contoso VB365 Tenant\" $securestring = ConvertTo-SecureString -String \"veeam\" -Force -AsPlainText Export-PfxCertificate -Cert $cert -FilePath \"vbo-application-certificate.pfx\" -Password $securestring $pfx_cert = Get-Content \"vbo-application-certificate.pfx\" -Encoding Byte [System.Convert]::ToBase64String($pfx_cert) | Out-File \"vbo-application-certificate.txt\" . The result of the above sample code is a text file (vbo-application-certificate.txt) that contains the info for the applicationCertificate parameter with an applicationCertificatePassword of veeam. These are used in parameter of this API call. ",
    "url": "/docs/automation/vb365/onboarding.html#workflow-to-add-an-organization-to-veeam-backup-for-microsoft-365",
    "relUrl": "/automation/vb365/onboarding.html#workflow-to-add-an-organization-to-veeam-backup-for-microsoft-365"
  },"75": {
    "doc": "Onboarding",
    "title": "Onboarding",
    "content": "(click to expand table of contents) . | Workflow to add an Organization to Veeam Backup for Microsoft 365 . | API calls involved in the above workflow . | Step #2: POST /v6/DeviceCode | Step #6: POST /v6/Organizations | . | . | . ",
    "url": "/docs/automation/vb365/onboarding.html",
    "relUrl": "/automation/vb365/onboarding.html"
  },"76": {
    "doc": "Onboarding",
    "title": "Workflow to onboard a Cloud Connect tenant",
    "content": "The below workflow describes onboarding a Cloud Connect tenant so they can leverage Cloud Connect Backup or Cloud Connect Replication. It follows the process of creating a Company in the Veeam Service Provider Console. While these instructions were written for version 6.0, they can be applied to version 5.0 with minor changes to the API calls used. | /v3/organizations/companies - creates the Company in the Veeam Service Provider Console. | /v3/organizations/companies/{companyUid}/sites - creates the Cloud Connect tenant account in the Veeam Backup &amp; Replication server | Create a backup or replication resource . | Backup Resource | Replication Resource (VMware vCenter) | Replication Resource (VMware Cloud Director) | . | /v3/organizations/companies/{companyUid}/welcomeEmail . | This is Veeam’s built-in method for providing your newly onboarded tenant credentials as well as getting started instructions. If required, the welcome email template can customized to your liking. | . | . ",
    "url": "/docs/automation/vspc/onboarding.html#workflow-to-onboard-a-cloud-connect-tenant",
    "relUrl": "/automation/vspc/onboarding.html#workflow-to-onboard-a-cloud-connect-tenant"
  },"77": {
    "doc": "Onboarding",
    "title": "Workflow to onboard a managed services customer",
    "content": "The below workflow describes a customer where you’ll be managing the customer’s Veeam environment. It follows the process of creating a Company in Veeam Service Provider Console, creating a Pulse license for the newly created company, and installing the license to the remote customer server. | /v3/organizations/companies - creates the Company in the Veeam Service Provider Console. | /v3/organizations/companies/{companyUid}/sites - creates the Cloud Connect tenant account in the Veeam Backup &amp; Replication server | /v3/pulse/tenants - that’s needed to create your new client in the VCSP Pulse platform (required to cut a license key) . | If the setting isPushingNewCompaniesToPulseEnabled is enabled, then skip this step | . | /v3/pulse/licenses - these API calls provide the necessary information to use when creating the license: . | Get all rental agreement contracts | Get Veeam products available in VCSP Pulse | . | /v3/pulse/licenses/{licenseUid} - after this step, the newly created license key gets pushed to the client self-service portal and makes it available for you to download | /v3/pulse/licenses/{licenseUid}/download and convert it from Base64 to license file for further usage | Connect customer server so it’s managed by Veeam Service Provider Console: . | Veeam Backup &amp; Replication | Veeam ONE (v11a) | Veeam Backup for Microsoft 365 (v6) | . | Licenses can now be installed on the customer’s server using these calls: . | Veeam Backup &amp; Replication | Veeam ONE (v11a) | Veeam Backup for Microsoft 365 (v6) | . | . ",
    "url": "/docs/automation/vspc/onboarding.html#workflow-to-onboard-a-managed-services-customer",
    "relUrl": "/automation/vspc/onboarding.html#workflow-to-onboard-a-managed-services-customer"
  },"78": {
    "doc": "Onboarding",
    "title": "Onboarding",
    "content": "(click to expand table of contents) . | Workflow to onboard a Cloud Connect tenant | Workflow to onboard a managed services customer | . Note: Please take heed of the following items, as highlighted in Veeam documentation, as they’ll most likely require additional configuration in your custom integration or in your Veeam environment: . | Asynchronous Processing | Throttling | . ",
    "url": "/docs/automation/vspc/onboarding.html",
    "relUrl": "/automation/vspc/onboarding.html"
  },"79": {
    "doc": "Repository and Copy Job Blueprint",
    "title": "Introduction",
    "content": "This document is intended to provide Veeam Cloud &amp; Service Providers (VCSP) detailed information regarding possible Veeam Backup Repositories and Copy Job configurations. This includes information to consider when planning out Repositories for Veeam to be used both on-prem and as Cloud Connect targets. Along with the Repository information is job setting information that could help improve the performance and overall experience. This document is not intended to supersede existing Veeam Technical Documentation, White Papers, or Best Practices. ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/#introduction",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/#introduction"
  },"80": {
    "doc": "Repository and Copy Job Blueprint",
    "title": "Repository and Copy Job Blueprint",
    "content": " ",
    "url": "/docs/vcc/repository_and_copy_job_blueprint/",
    "relUrl": "/vcc/repository_and_copy_job_blueprint/"
  },"81": {
    "doc": "Resources Page",
    "title": "VCSP Resource Reference Page",
    "content": "This page was created by the VCSP tech team to provide our partners with a single location to find commonly referenced tools and documentation. VBR . | KB2680: Build numbers and version of Veeam Backup &amp; Replication | Veeam Backup &amp; Replication Capacity Calculator | Restore Point Simulator (dewin.me) | . VBO . | KB4106: Build numbers and versions of Veeam Backup for Microsoft Office 365 | Veeam Backup for O365 Capacity Calculator | . Cloud Connect . | Veeam Cloud Connect Reference Architecture (vccbook.io) | Guide for Tenants - Veeam Cloud Connect Guide | Guide for Service Providers - Veeam Cloud Connect Guide | . VSPC . | Getting Started - Veeam Service Provider Console Guide | About Veeam Service Provider Console - Veeam Service Provider Console Guide for End Users | . Training . | VMXP - Powering Cloud Services with Veeam . | Free online training that is a foundational learning path designed to give a core understanding of the principles, products, and resources available to partners who are building and/or selling Veeam-powered solutions. | . | . ",
    "url": "/docs/resources/#vcsp-resource-reference-page",
    "relUrl": "/resources/#vcsp-resource-reference-page"
  },"82": {
    "doc": "Resources Page",
    "title": "Resources Page",
    "content": " ",
    "url": "/docs/resources/",
    "relUrl": "/resources/"
  },"83": {
    "doc": "Restore Portal",
    "title": "Restore Portal Configuration",
    "content": "Starting with Veeam Backup for Microsoft 365 6.0, a built-in Restore Portal is available. Configuration of the Restore Portal is covered in Veeam documentation. The following GitHub project provides PowerShell scripts to automate configuration of the Restore Portal. The project contains additional documentation relating to the scripts and their use. https://github.com/VeeamHub/powershell/blob/master/VB365-RestorePortalSetup/ . ",
    "url": "/docs/automation/vb365/restore-portal.html#restore-portal-configuration",
    "relUrl": "/automation/vb365/restore-portal.html#restore-portal-configuration"
  },"84": {
    "doc": "Restore Portal",
    "title": "Restore Portal",
    "content": "(click to expand table of contents) . | Restore Portal Configuration | . ",
    "url": "/docs/automation/vb365/restore-portal.html",
    "relUrl": "/automation/vb365/restore-portal.html"
  },"85": {
    "doc": "Tenant Restore Procedures",
    "title": "Introduction",
    "content": "This document is intended to provide Veeam Cloud &amp; Service Providers (VCSP) a guide for recovering Cloud Connect backups for their tenants. Based on Veeam Cloud Connect Architecture, there are a few possible options to restore tenant data into a VCSP hosted environment. Some of the options will be listed as part of the document, however not all can be covered as there are too many to list. The goal would be to cover the most common. No matter the architecture, the basic concept steps are consistent. Be aware that Instant VM recovery is not supported via a Cloud Connect Repository. NOTE: There are two sections to this document - one for a VCSP/MSP managed recovery and one for a Tenant managed recovery. It is important to distinguish the two and the different steps in order to prevent possible data corruption of the Cloud Connect environment as well as other tenant backups. ",
    "url": "/docs/vcc/tenant_restore/#introduction",
    "relUrl": "/vcc/tenant_restore/#introduction"
  },"86": {
    "doc": "Tenant Restore Procedures",
    "title": "Tenant Restore Procedures",
    "content": " ",
    "url": "/docs/vcc/tenant_restore/",
    "relUrl": "/vcc/tenant_restore/"
  },"87": {
    "doc": "Usage Reporting",
    "title": "License Usage Reporting",
    "content": "Monthly License Usage Report . Generated once a month at the beginning of the month. It can also be accessed using the web UI and should be used for reporting your monthly license usage to Veeam as defined in the Veeam Rental Licensing and Usage Reporting reference guide. | /v3/licensing/reports/latest: Returns the most recent usage report | /v3/licensing/reports/{date}: Returns the usage report for the specified date. Useful for pulling usage reports older than the previous month. | . Mid-month License Usage . Returns point-in-time license usage for the current calendar month. This is beneficial for those customers with a billing cycle ending in the middle of the month. | /v3/licensing/sites/usage/companies: Returns Veeam Cloud Connect licenses usage by companies | /v3/licensing/backupServers/usage/companies: Returns Veeam Backup &amp; Replication rental licenses usage by companies. This is any VBR server managed by VSPC that is using your company’s Veeam rental license. | /v3/licensing/console/usage/companies: Returns usage by companies for all agents (VAW/VAL/VAM) managed directly by VSPC | /v3/licensing/voneServers/usage/companies: Returns Veeam ONE (11a) licenses usage by companies | /v3/licensing/vbm365Servers/usage/companies: Returns Veeam Backup for Microsoft 365 (v6) licenses usage by companies | . ",
    "url": "/docs/automation/vspc/usage.html#license-usage-reporting",
    "relUrl": "/automation/vspc/usage.html#license-usage-reporting"
  },"88": {
    "doc": "Usage Reporting",
    "title": "Storage Usage Reporting",
    "content": "Backup Resources . | /v3/organizations/companies/sites/backupResources/usage: Returns current Cloud Connect backup resource usage by companies | . Replication Resources . | /v3/organizations/companies/sites/replicationResources/usage: Returns current Cloud Connect replication (VMware vCenter) resource usage by companies | /api/v3/organizations/companies/sites/vcdReplicationResources/usage: Returns current Cloud Connect replication (VMware Cloud Director) resource usage by companies | . ",
    "url": "/docs/automation/vspc/usage.html#storage-usage-reporting",
    "relUrl": "/automation/vspc/usage.html#storage-usage-reporting"
  },"89": {
    "doc": "Usage Reporting",
    "title": "IaaS Usage Reporting",
    "content": "This section describes common methods used by service providers to pull chargeback usage for their IaaS customers. Tip: Use Filter query string to limit results . IaaS License Usage . | /v3/infrastructure/backupServers/jobs: Retrieve IaaS customer backup jobs . | Uniquely naming the backup job so you can identify the IaaS customer is key. | Filter by backup job name | . | /v3/protectedWorkloads/virtualMachines: Retrieve VMs protected by IaaS customer backup jobs . | Filter by backup job ID (jobUid) | You can further filter the results to show only VMs with the latestRestorePointDate within the previous 30 days if you want to mimic Veeam Rental License and Usage Reporting guidelines. | . | The total VM count of all VMs identified in the previous step is the IaaS customer license usage. | . IaaS Storage Usage . Option 1: Protected Workloads API . This method is more granular than option 2 and is discussed in further detail in the IaaS License Usage section. High-level…you identify all VMs protected by the backup jobs and take the sum of the totalRestorePointSize parameter for those VMs. | /v3/infrastructure/backupServers/jobs: Retrieve IaaS customer backup jobs | /v3/protectedWorkloads/virtualMachines: Retrieve VMs protected by IaaS customer backup jobs | The sum of the totalRestorePointSize parameter for all VMs identified in the previous step is the IaaS customer storage usage. | . Option 2: Dedicated Repositories . If you can dedicate a repository for each IaaS customer, then you can pull storage usage at the repository-level either using Veeam APIs (or direct from the storage). ",
    "url": "/docs/automation/vspc/usage.html#iaas-usage-reporting",
    "relUrl": "/automation/vspc/usage.html#iaas-usage-reporting"
  },"90": {
    "doc": "Usage Reporting",
    "title": "Usage Reporting",
    "content": "(click to expand table of contents) . | License Usage Reporting . | Monthly License Usage Report | Mid-month License Usage | . | Storage Usage Reporting . | Backup Resources | Replication Resources | . | IaaS Usage Reporting . | IaaS License Usage | IaaS Storage Usage . | Option 1: Protected Workloads API | Option 2: Dedicated Repositories | . | . | . Note: Please take heed of the following items, as highlighted in Veeam documentation, as they’ll most likely require additional configuration in your custom integration or in your Veeam environment: . | Asynchronous Processing | Throttling | . ",
    "url": "/docs/automation/vspc/usage.html",
    "relUrl": "/automation/vspc/usage.html"
  },"91": {
    "doc": "GFS Retention in CC",
    "title": "Introduction",
    "content": "This document is intended to provide Veeam Cloud &amp; Service Providers (VCSPs) help to understand the impact of v11 GFS retention changes. ",
    "url": "/docs/vcc/gfs/#introduction",
    "relUrl": "/vcc/gfs/#introduction"
  },"92": {
    "doc": "GFS Retention in CC",
    "title": "v11 GFS retention in review",
    "content": "Consider the explanation of v11 GFS changes here. GFS retention is now controlled by a background process (daily job) in Veeam Backup and Replication. ",
    "url": "/docs/vcc/gfs/#v11-gfs-retention-in-review",
    "relUrl": "/vcc/gfs/#v11-gfs-retention-in-review"
  },"93": {
    "doc": "GFS Retention in CC",
    "title": "See it in action",
    "content": "Navigate to the History node of Veeam Backup and Replication, select the System section. Filter this job for “retention” . The job statistics and corresponding log files detail GFS restore point retention management. ",
    "url": "/docs/vcc/gfs/#see-it-in-action",
    "relUrl": "/vcc/gfs/#see-it-in-action"
  },"94": {
    "doc": "GFS Retention in CC",
    "title": "v11 GFS retention in Cloud Connect",
    "content": "On a Backup and Replication server with a Cloud Connect license a retention job runs nightly, like traditional Backup and Replication. This Cloud Connect server will control the retention of GFS restore points for tenant backups in Cloud Repositories. See below for an example of a backup file being deleted in Cloud Connect during background GFS retention. Additional details can be found in this log file: . C:\\ProgramData\\Veeam\\Backup\\Retention_job\\Job.Retention_job . ",
    "url": "/docs/vcc/gfs/#v11-gfs-retention-in-cloud-connect",
    "relUrl": "/vcc/gfs/#v11-gfs-retention-in-cloud-connect"
  },"95": {
    "doc": "GFS Retention in CC",
    "title": "Why it matters to you",
    "content": "The Cloud Connect Backup and Replication server is responsible for GFS retention. Tenant side jobs (after completion) don’t run this process anymore. During the retention job process all tenant backups, including disconnected and/or deleted tenants, have expired GFS retention points removed when necessary. ",
    "url": "/docs/vcc/gfs/#why-it-matters-to-you",
    "relUrl": "/vcc/gfs/#why-it-matters-to-you"
  },"96": {
    "doc": "GFS Retention in CC",
    "title": "GFS Retention in CC",
    "content": " ",
    "url": "/docs/vcc/gfs/",
    "relUrl": "/vcc/gfs/"
  },"97": {
    "doc": "Veeam Backup for Microsoft 365",
    "title": "Veeam Backup for Microsoft 365",
    "content": "These document(s) provide code samples or links to open source projects containing code samples for Veeam Backup for Microsoft 365. Please note that code samples provided are not created by Veeam R&amp;D nor validated by Veeam Q&amp;A. They are maintained by community members which might be or not be Veeam employees. As such, please perform testing and validation prior to using any code or tools mentioned in a production environment. This information is not intended to supersede existing Veeam Technical Documentation, White Papers, or Best Practices. ",
    "url": "/docs/automation/vb365/",
    "relUrl": "/automation/vb365/"
  },"98": {
    "doc": "Veeam Backup for Office 365",
    "title": "Veeam Backup for Office 365",
    "content": "Veeam Backup for Microsoft Office 365 is a comprehensive solution that allows service providers to back up and recover Microsoft Office 365 mail, SharePoint, OneDrive and Teams data as well as on-premises Exchange and SharePoint. It provides the following capabilities: . | Mailbox item recovery can be done directly back to an Office 365 mailbox or to an on-premises Exchange mailbox. | Alternatively, recovered e-mail can be saved as a file, e-mailed as an attachment or exported as a PST file. | SharePoint Sites, Document Libraries, Lists, Documents and List items can be recovered directly back to SharePoint or in the case of documents downloaded directly | OneDrive items can be restored back to the user directly, copied to another user, or restored locally. | Teams conversations, groups and documents are protected and can be restored on a granular level. | . The solution can run on a physical or virtual machine that meets system requirements and can be deployed on-premise or in a public cloud. ",
    "url": "/docs/vbo/",
    "relUrl": "/vbo/"
  },"99": {
    "doc": "Veeam Backup & Replication",
    "title": "Veeam Backup & Replication",
    "content": "Veeam Backup &amp; Replication is a comprehensive data protection and disaster recovery solution. With Veeam Backup &amp; Replication, you can create image-level backups of virtual, physical and cloud machines and restore from them. Technology used in the product optimizes data transfer and resource consumption, which helps to minimize storage costs and the recovery time in case of a disaster. Veeam Backup &amp; Replication provides a centralized console for administering backup, restore and replication operations in all supported platforms (virtual, physical, cloud). Also, the console allows you to automate and schedule routine data protection operations and integrate with solutions for alerting and generating compliance reports. ",
    "url": "/docs/vbr/",
    "relUrl": "/vbr/"
  },"100": {
    "doc": "Veeam Cloud Connect",
    "title": "Veeam Cloud Connect",
    "content": "Veeam Cloud Connect allows service providers (SP) to offer cloud repository as a service and disaster recovery as a service to their customers (tenants). Based on Veeam Backup &amp; Replication, Cloud Connect lets SPs set up the cloud infrastructure so that tenants can send their data to the cloud and store it there in an easy and secure way. Veeam does not offer its own cloud for storing tenant data. Instead, it uses SP computing, storage and network resources to configure Veeam Cloud Connect Backup and Veeam Cloud Connect Replication infrastructure components: . Cloud repositories — storage locations in the cloud that store backups of tenant machines. Cloud repositories can be used as primary storage locations and secondary storage locations to meet the 3-2-1 backup best practice. Replication resources — dedicated computing, storage and network resources in the SP virtualization environment. To set up replication resources, the SP configures hardware plans and subscribes tenants to one or several hardware plans. For tenants, hardware plans appear as cloud hosts. Tenants can create VM replicas on cloud hosts and fail over to VM replicas in the cloud in case of a disaster on the production site. Tenants who want to store their data in the cloud can connect to the SP and write their backups to cloud repositories and/or replicate their VMs to cloud hosts. ",
    "url": "/docs/vcc/",
    "relUrl": "/vcc/"
  },"101": {
    "doc": "Veeam Service Provider Console",
    "title": "Veeam Service Provider Console",
    "content": "These document(s) provide code samples or links to open source projects containing code samples for Veeam Service Provider Console. Please note that code samples provided are not created by Veeam R&amp;D nor validated by Veeam Q&amp;A. They are maintained by community members which might be or not be Veeam employees. As such, please perform testing and validation prior to using any code or tools mentioned in a production environment. This information is not intended to supersede existing Veeam Technical Documentation, White Papers, or Best Practices. ",
    "url": "/docs/automation/vspc/",
    "relUrl": "/automation/vspc/"
  }
}

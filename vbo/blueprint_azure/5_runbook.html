<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>5 Deployment - VCSP Technical Documentation Hub</title> <!-- Veeam - 16/12/2020 --> <link rel="shortcut icon" href="/docs/assets/images/veeam.ico" type="image/x-icon"> <!-- /Veeam - 16/12/2020 --> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>5 Deployment | VCSP Technical Documentation Hub</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="5 Deployment" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Technical documentation from the field for VCSPs" /> <meta property="og:description" content="Technical documentation from the field for VCSPs" /> <link rel="canonical" href="/docs/vbo/blueprint_azure/5_runbook.html" /> <meta property="og:url" content="/docs/vbo/blueprint_azure/5_runbook.html" /> <meta property="og:site_name" content="VCSP Technical Documentation Hub" /> <script type="application/ld+json"> {"url":"/docs/vbo/blueprint_azure/5_runbook.html","@type":"WebPage","description":"Technical documentation from the field for VCSPs","headline":"5 Deployment","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <!-- Veeam - 16/12/2020 --> <a href="/docs/"> <img class="veeam_logo_lp" src="/docs/assets/images/Veeam_logo_peridot_2019.svg" alt="Veeam"/> </a> <button id="menu-button" class="c-hamburger js-hamburger"> <span>menu</span> </button> <!-- /Veeam - 16/12/2020 --> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/" class="nav-list-link">VCSP Documentation Hub</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/automation/" class="nav-list-link">Automation</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/automation/vb365/" class="nav-list-link">Veeam Backup for Microsoft 365</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/automation/vb365/onboarding.html" class="nav-list-link">Onboarding</a> </li><li class="nav-list-item "> <a href="/docs/automation/vb365/restore-portal.html" class="nav-list-link">Restore Portal</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/automation/vspc/" class="nav-list-link">Veeam Service Provider Console</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/automation/vspc/onboarding.html" class="nav-list-link">Onboarding</a> </li><li class="nav-list-item "> <a href="/docs/automation/vspc/usage.html" class="nav-list-link">Usage Reporting</a> </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vbo/" class="nav-list-link">Veeam Backup for Office 365</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vbo/blueprint/" class="nav-list-link">Blueprint for Success at Scale</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/vbo/blueprint/1_intro.html" class="nav-list-link">1 Introduction</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/2_architecture.html" class="nav-list-link">2 Architecture</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/3_sizing_assumptions.html" class="nav-list-link">3 Sizing Assumptions</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/4_certificate_management.html" class="nav-list-link">4 Certificate Management</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/5_deploying.html" class="nav-list-link">5 Deploying the RA</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/6_adding_first_tenant.html" class="nav-list-link">6 Adding a Tenant</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/7_ssr.html" class="nav-list-link">7 Self-Service Restores</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/8_scaling.html" class="nav-list-link">8 Scaling the platform</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/9_notifications.html" class="nav-list-link">9 Notifications</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/10_licensing.html" class="nav-list-link">10 Licensing</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/11_monitoring_reporting.html" class="nav-list-link">11 Monitoring & Reporting</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/12_loss_protection.html" class="nav-list-link">12 Loss Protection</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint/13_conclusion.html" class="nav-list-link">13 Conclusion</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vbo/blueprint_azure/" class="nav-list-link">Blueprint for Success in Azure</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/1_intro.html" class="nav-list-link">1 Introduction</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/2_sizing.html" class="nav-list-link">2 Sizing</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/3_architecture.html" class="nav-list-link">3 Architecture</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/4_authentication.html" class="nav-list-link">4 Authentication</a> </li><li class="nav-list-item active"> <a href="/docs/vbo/blueprint_azure/5_runbook.html" class="nav-list-link active">5 Deployment</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/6_monitoring.html" class="nav-list-link">6 Monitoring</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/7_data_recovery.html" class="nav-list-link">7 Data Recovery</a> </li><li class="nav-list-item "> <a href="/docs/vbo/blueprint_azure/8_business_case.html" class="nav-list-link">8 Business Case</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vbr/" class="nav-list-link">Veeam Backup & Replication</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/vbr/msp_appliance/" class="nav-list-link">MSP Appliance Guide</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vcc/" class="nav-list-link">Veeam Cloud Connect</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vcc/tenant_restore/" class="nav-list-link">Tenant Restore Procedures</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/vcc/tenant_restore/1_basic_concept_steps.html" class="nav-list-link">1 Basic Concept Steps</a> </li><li class="nav-list-item "> <a href="/docs/vcc/tenant_restore/2_vcsp_recovery_procedures.html" class="nav-list-link">2 VCSP/MSP Managed Recovery Procedures</a> </li><li class="nav-list-item "> <a href="/docs/vcc/tenant_restore/3_tenant_recovery_procedures.html" class="nav-list-link">3 Tenant Managed Recovery Procedures</a> </li></ul></li><li class="nav-list-item "><a href="/docs/vcc/gfs/" class="nav-list-link">GFS Retention in CC</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/vcc/repository_and_copy_job_blueprint/" class="nav-list-link">Repository and Copy Job Blueprint</a><!-- Veeam: Removing check for grand parent here to keep security in every section --><!-- /Veeam --> <ul class="nav-list"><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/1_repository_considerations.html" class="nav-list-link">1 Repository Considerations</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/2_block_size.html" class="nav-list-link">2 Block Size Considerations</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/3_sobr.html" class="nav-list-link">3 SOBR Considerations</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/4_copy_job_consideration.html" class="nav-list-link">4 Job Mode Consideration</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/5_dedupe.html" class="nav-list-link">5 Dedupe Appliance Considerations</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/6_job_maintenance.html" class="nav-list-link">6 Job Maintenance Settings</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/7_backup_copy_settings.html" class="nav-list-link">7 Backup Copy Job Settings</a> </li><li class="nav-list-item "> <a href="/docs/vcc/repository_and_copy_job_blueprint/8_conclusion.html" class="nav-list-link">8 Conclusion</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="/docs/resources/" class="nav-list-link">Resources Page</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search VCSP Technical Documentation Hub" aria-label="Search VCSP Technical Documentation Hub" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/vbo/">Veeam Backup for Office 365</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/vbo/blueprint_azure/">Blueprint for Success in Azure</a></li> <li class="breadcrumb-nav-list-item"><span>5 Deployment</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <details close=""> <summary class="text-delta">(click to expand table of contents)</summary> <ul id="markdown-toc"> <li><a href="#5-vbo365-in-azure-deployment-runbook-for-1000-users" id="markdown-toc-5-vbo365-in-azure-deployment-runbook-for-1000-users">5. VBO365 in Azure Deployment Runbook for 1000 Users</a> <ul> <li><a href="#51-provision-the-azure-vm" id="markdown-toc-51-provision-the-azure-vm">5.1. Provision the Azure VM</a></li> <li><a href="#52-provisioning-a-reserved-instance" id="markdown-toc-52-provisioning-a-reserved-instance">5.2. Provisioning a Reserved Instance</a></li> <li><a href="#53-provision-azure-blob" id="markdown-toc-53-provision-azure-blob">5.3. Provision Azure Blob</a></li> <li><a href="#54-configure-a-service-endpoint" id="markdown-toc-54-configure-a-service-endpoint">5.4. Configure a Service Endpoint</a></li> <li><a href="#55-initialize-and-format-the-repository-disk" id="markdown-toc-55-initialize-and-format-the-repository-disk">5.5. Initialize and Format the Repository Disk</a></li> <li><a href="#56-install-veeam-backup-for-microsoft-office-365" id="markdown-toc-56-install-veeam-backup-for-microsoft-office-365">5.6. Install Veeam Backup for Microsoft Office 365</a></li> <li><a href="#57-install-veeam-explorer-for-exchange" id="markdown-toc-57-install-veeam-explorer-for-exchange">5.7. Install Veeam Explorer for Exchange</a></li> <li><a href="#58-install-veeam-explorer-for-sharepoint" id="markdown-toc-58-install-veeam-explorer-for-sharepoint">5.8. Install Veeam Explorer for SharePoint</a></li> <li><a href="#59-install-veeam-explorer-for-onedrive" id="markdown-toc-59-install-veeam-explorer-for-onedrive">5.9. Install Veeam Explorer for OneDrive</a></li> <li><a href="#510-licensing-veeam-backup-for-microsoft-office-365" id="markdown-toc-510-licensing-veeam-backup-for-microsoft-office-365">5.10. Licensing Veeam Backup for Microsoft Office 365</a></li> <li><a href="#511-adding-a-microsoft-365-organization-with-modern-authentication" id="markdown-toc-511-adding-a-microsoft-365-organization-with-modern-authentication">5.11. Adding a Microsoft 365 Organization with Modern Authentication</a></li> <li><a href="#512-managing-backup-azure-ad-applications-for-sharepointonedrive" id="markdown-toc-512-managing-backup-azure-ad-applications-for-sharepointonedrive">5.12. Managing Backup Azure AD Applications for SharePoint/OneDrive</a></li> <li><a href="#513-create-a-tenant-object-storage-repository" id="markdown-toc-513-create-a-tenant-object-storage-repository">5.13. Create a Tenant Object Storage Repository</a></li> <li><a href="#514-configure-a-tenant-backup-repository" id="markdown-toc-514-configure-a-tenant-backup-repository">5.14. Configure a Tenant Backup Repository</a></li> <li><a href="#515-create-a-backup-job" id="markdown-toc-515-create-a-backup-job">5.15. Create a Backup Job</a> <ul> <li><a href="#5151-recommended-job-practice-notes" id="markdown-toc-5151-recommended-job-practice-notes">5.15.1. Recommended Job Practice Notes</a></li> </ul> </li> </ul> </li> </ul> </details> <h2 id="5-vbo365-in-azure-deployment-runbook-for-1000-users"> <a href="#5-vbo365-in-azure-deployment-runbook-for-1000-users" class="anchor-heading" aria-labelledby="5-vbo365-in-azure-deployment-runbook-for-1000-users"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. VBO365 in Azure Deployment Runbook for 1000 Users </h2> <p>The Microsoft Azure Marketplace provides a template in which a VBO365 server can be deployed. While the marketplace appliance is regularly updated, it is possible there is a short lag between new Veeam software version releases and the version available in marketplace template. Two options for deployment is via the marketplace followed by applying an update as needed, or manual VM provisioning and installation of the latest software release. The runbook selections in this section can be applied to either path.</p> <p>This document focuses on the manual deployment, starting with the deployment of a Windows Server from a template and finishing with the installation and configuration of the VBO365 software.</p> <h3 id="51-provision-the-azure-vm"> <a href="#51-provision-the-azure-vm" class="anchor-heading" aria-labelledby="51-provision-the-azure-vm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.1. Provision the Azure VM </h3> <ol> <li> <p>Access the root menu and select “Create a resource”.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.1_create_resource.png" alt="Create Resource" /></p> </li> <li> <p>Configure Basics options. Use existing or create a new Resource Group, specify a Virtual Machine Name, and specify a Region. Based on <em>Section 3.4</em>, change the VM size to an <strong>F4s V2</strong>.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.2_basic.png" alt="Basic" /></p> </li> <li> <p>Provide credentials. Specify if you have a Windows license.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.3_creds.png" alt="Credentials" /></p> <p><strong>Note: Using your own license provides discounting. For purposes of this document, No is selected for licensing.</strong></p> <p>Click Next.</p> </li> <li> <p>Select Disk options. Windows Server 2016 Templates includes a 128GB disk for the OS. Select Premium SSD for the OS disk type. For 5TB of Office 365 data, a 64GB SSD disk is required for the backup metadata disk. Select Premium SSD, <strong>P6</strong> , No Host Caching, and Managed disk option for the Data disk. Click on “Create and attach a new disk” to configure. The end result should be similar to the following screenshot:</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.4_disks.png" alt="Disks" /></p> </li> <li> <p>Specify Networking settings per your preference or leave defaults. Disable Accelerated networking. Load Balancing should remain off.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.5_networking.png" alt="Networking" /></p> </li> <li> <p>Specify Management settings per your preference. Boot diagnostics are not required.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.6_management.png" alt="Management" /></p> </li> <li> <p>There are no Veeam requirements in the Advanced settings. Defaults can be maintained.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.7_advanced.png" alt="Advanced" /></p> </li> <li> <p>Tags can be defined as needed.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.8_tags.png" alt="Tags" /></p> </li> <li> <p>Review configuration options and click Create to provision the VM.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.1.9_review&amp;create.png" alt="Review and create" /></p> </li> </ol> <h3 id="52-provisioning-a-reserved-instance"> <a href="#52-provisioning-a-reserved-instance" class="anchor-heading" aria-labelledby="52-provisioning-a-reserved-instance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.2. Provisioning a Reserved Instance </h3> <p>Reserved Instances can be applied to subscriptions for commitments of 1 or 3 years. This applies discounting to the subscription.</p> <ol> <li> <p>Access the root menu and select “Create a resource”.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.1_create.png" alt="Create" /></p> </li> <li> <p>In the search bar, type “Reserved VM Instances” and press the Enter key.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.2_create_resource.png" alt="Create resource" /></p> <p>Click Create to start the wizard.</p> </li> <li> <p>In the left pane click on “Virtual machine”. The right pane will provide a list of VM sizes to choose from.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.3_product.png" alt="product" /></p> </li> <li> <p>Modify the filter for the appropriate region. As this document focuses on Central US, that is the selection depicted below. This document also focuses on a 1 Year Reservation. Therefore, the Term filter needs to be modified since the default is 3 Years, unless 3 Years is preferred. Click the Term filter and select the appropriate commitment year(s) from the dropdown.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.4_year.png" alt="year" /></p> </li> <li> <p>The required VM size based on previous section is F4s v2. In the “Filter by name” textbox, type in “F4” and it should produce a list of related VM sizes.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.5_vm_size.png" alt="vm size" /></p> <p>Please note, the defined scope determines how the reserved instance is applied, either to be shared across all subscriptions or can be applied to a single subscription, or applied to a resource group to for discounting. Reservation Instances discount compute only, not the operating system.</p> <p>Select the <strong>F4s_v2</strong> size and click “Select”.</p> </li> <li> <p>Optionally, the reservation instance name can be modified if desired.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.6_reservation.png" alt="reservation" /></p> <p>Click Next to review.</p> </li> <li> <p>Review.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.2.7_purchase.png" alt="purchase" /></p> <p>Click Buy now to complete the process.</p> </li> </ol> <h3 id="53-provision-azure-blob"> <a href="#53-provision-azure-blob" class="anchor-heading" aria-labelledby="53-provision-azure-blob"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.3. Provision Azure Blob </h3> <p>The use case in this document focuses on leveraging object storage to store VBO365 backup data.</p> <ol> <li> <p>Access the root menu and select “Storage accounts”.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.1_create_resource.png" alt="create resource" /></p> </li> <li> <p>Click on Add.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.2_add.png" alt="add" /></p> </li> <li> <p>To select Basic options, confirm the subscription, choose a Resource Group, input a Storage account name, confirm Location, set Account kind to “BlobStorage”, set Replication LRS or GRS, and set Access tier default to “Hot”.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.3_blob.png" alt="blob" /></p> <p><strong>Note: Hot tier is suggested because it would liklely be more cost effective to reduce API operational cost. Both hot and cool tiers are supported. LRS and GRS is supported.</strong></p> </li> <li> <p>Configure Networking, defaults can be maintained.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.4_data_protection.png" alt="data protection" /></p> <p>Click Next.</p> </li> <li> <p>Maintain Data Protection defaults.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.5_networking.png" alt="networking" /></p> <p>Click Next.</p> </li> <li> <p>Configure Advanced. Ensure “Secure transfer required” is enabled and set “Allow Blob public access” to Disabled.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.6_advanced.png" alt="advanced" /></p> <p>Click Next.</p> </li> <li> <p>Configure Tags if desired.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.7_tags.png" alt="tags" /></p> <p>Click Next.</p> </li> <li> <p>Review and click Create.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.8_review&amp;create.png" alt="review and create" /></p> </li> <li> <p>Upon deployment, go to the storage resource and click on Containers.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.9_vboblob.png" alt="VBO blob" /></p> </li> <li> <p>Create a new Container. Input a name of your choice and click Create. It’s suggested to identify the VBO product and tenant name in the naming scheme.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.10_new_container.png" alt="new container" /></p> </li> <li> <p>In the Containers menu, click on Access Keys.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.11_access_link.png" alt="access link" /></p> </li> <li> <p>Access Keys can be found here. The storage account name and key information will need to be entered in the VBO365 Console <em>(Section 5.13 Step 3)</em> to connect to the object store.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.3.12_access_key.png" alt="access key" /></p> </li> </ol> <h3 id="54-configure-a-service-endpoint"> <a href="#54-configure-a-service-endpoint" class="anchor-heading" aria-labelledby="54-configure-a-service-endpoint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.4. Configure a Service Endpoint </h3> <ol> <li> <p>Navigate to the VBO server in the Azure portal. Then click on the Virtual network/subnet link.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.4.1_service_endpoint.png" alt="service endpoint" /></p> </li> <li> <p>Click on Service Endpoints.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.4.2_virtual_network.png" alt="virtual network" /></p> </li> <li> <p>Click Add to add a service endpoint.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.4.3_add_endpoint.png" alt="Add endpoint" /></p> </li> <li> <p>Search for Microsoft.Storage option in the filter drop down.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.4.4_select_endpoint.png" alt="select endpoint" /></p> </li> <li> <p>You may select the default subnet unless another one has been created for VBO. This subnet will connect to the blob storage via internal IP address. If a Service endpoint policy exists, you may select it, else it can be left blank since it is optional.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.4.5_select_subnet.png" alt="select subnet" /></p> <p>Click Add at the bottom when done.</p> </li> </ol> <h3 id="55-initialize-and-format-the-repository-disk"> <a href="#55-initialize-and-format-the-repository-disk" class="anchor-heading" aria-labelledby="55-initialize-and-format-the-repository-disk"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.5. Initialize and Format the Repository Disk </h3> <ol> <li> <p>Login to the VBO365 server and use Disk Manger to create the new data volume.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.5.1_disk_manager.png" alt="disk manager" /></p> <p>Click Ok to initialize the added data disk.</p> </li> <li> <p>Both NTFS and ReFS file systems are supported. When using ReFS, the data integrity features should be disabled for volumes where data folders are located, or at least exclude VBO repository files. NTFS is suggested because it does not need any error-prone reconfiguration from the default settings. Storage encryption, dedupe, or compression does always mean added latency on I/O requests, thus we recommend disabling these features for better performance.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.5.2_format.png" alt="format" /></p> <p>Complete the wizard to format the volume.</p> </li> <li> <p>Access the drive and create a folder called “Backups”.</p> </li> </ol> <h3 id="56-install-veeam-backup-for-microsoft-office-365"> <a href="#56-install-veeam-backup-for-microsoft-office-365" class="anchor-heading" aria-labelledby="56-install-veeam-backup-for-microsoft-office-365"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.6. Install Veeam Backup for Microsoft Office 365 </h3> <ol> <li> <p>Please note, if the VM was provisioned using the Azure Marketplace, this section can be skipped. Check for updates and install. This document does not provide steps on updating.</p> <p>Begin the installation process by executing the “Veeam.Backup365_xxxx.msi”. This launches the setup.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.6.1_install.png" alt="install" /></p> <p>Click Next to proceed.</p> </li> <li> <p>Accept license agreements.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.6.2_end_user_license.png" alt="end user license" /></p> <p>Click Next.</p> </li> <li> <p>This dialogue box provides information on the installation paths for each component.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.6.3_install_path.png" alt="install path" /></p> <p>Click Next to accept defaults.</p> </li> <li> <p>Click Install to begin the installation.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.6.4_install_review.png" alt="install review" /></p> </li> <li> <p>This concludes the installation process.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.6.5_install_confirmation.png" alt="install confirmation" /></p> <p>Click Finish to complete.</p> </li> </ol> <h3 id="57-install-veeam-explorer-for-exchange"> <a href="#57-install-veeam-explorer-for-exchange" class="anchor-heading" aria-labelledby="57-install-veeam-explorer-for-exchange"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.7. Install Veeam Explorer for Exchange </h3> <p>The Veeam Explorer Tools enable recovery options for VBO365.</p> <ol> <li> <p>Begin the installation process by executing the “VeeamExplorerForExchange_xxxx.msi”. This launches the setup.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.7.1_install_microsoft_exchange.png" alt="install microsoft exchange" /></p> <p>Click Next.</p> </li> <li> <p>Accept the software license agreement and terms for 3rd party software components.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.7.2_license-agreement.png" alt="license agreement" /></p> <p>Click Next.</p> </li> <li> <p>Defaults maybe maintained.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.7.3_install_path.png" alt="install path" /></p> <p>Click Next.</p> </li> <li> <p>Final opportunity to go back or cancel.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.7.4_install_exchange_begin.png" alt="install exchange begin" /></p> <p>Click Install and click Finish when the install is complete.</p> </li> </ol> <h3 id="58-install-veeam-explorer-for-sharepoint"> <a href="#58-install-veeam-explorer-for-sharepoint" class="anchor-heading" aria-labelledby="58-install-veeam-explorer-for-sharepoint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8. Install Veeam Explorer for SharePoint </h3> <p>The Veeam Explorer Tools enable recovery options for VBO365.</p> <ol> <li> <p>Begin the installation process by executing the “VeeamExplorerForExchange_xxxx.msi”. This launches the setup.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.8.1_sharepoint_setup.png" alt="Sharepoint setup" /></p> <p>Click Next.</p> </li> <li> <p>Accept the software license agreement and terms for 3rd party software components.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.8.2_sharepoint_license_agreement.png" alt="sharepoint license agreement" /></p> <p>Click Next.</p> </li> <li> <p>Defaults maybe maintained.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.8.3_sharepoint_install_path.png" alt="sharepoint install path" /></p> <p>Click Next.</p> </li> <li> <p>Final opportunity to go back or cancel.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.8.4_sharepoint_install_begin.png" alt="sharepoint install begin" /></p> <p>Click Install and click Finish when the install is complete.</p> </li> </ol> <h3 id="59-install-veeam-explorer-for-onedrive"> <a href="#59-install-veeam-explorer-for-onedrive" class="anchor-heading" aria-labelledby="59-install-veeam-explorer-for-onedrive"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.9. Install Veeam Explorer for OneDrive </h3> <p>The Veeam Explorer for OneDrive is part of the VBO365 installation and does not need to be installed seperately.</p> <h3 id="510-licensing-veeam-backup-for-microsoft-office-365"> <a href="#510-licensing-veeam-backup-for-microsoft-office-365" class="anchor-heading" aria-labelledby="510-licensing-veeam-backup-for-microsoft-office-365"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.10. Licensing Veeam Backup for Microsoft Office 365 </h3> <ol> <li> <p>Launch Veeam Backup for Office 365 from the desktop shortcut.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.10.1_Veeam_office_backup.png" alt="Veeam office backup" /></p> <p>Click Connect.</p> </li> <li> <p>VBO365 will prompt you for a license.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.10.2_Veeam_office_backup_license.png" alt="Veeam office backup license" /></p> <p>Click No if a license is not available, as a license can be installed at a later time and the remainder of this section can be skipped. VBO365 will default to a community license allowing the protection of up to 10 users. Else, click Yes and continue on with this section.</p> <p>Click the Install button to browse to your license file and open. Once opened the license will be installed and will show information such as the following.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.10.2-1_Veeam_office_backup_license_info.png" alt="Veeam office backup license info" /></p> <p>Press OK to close the licensing window.</p> </li> </ol> <h3 id="511-adding-a-microsoft-365-organization-with-modern-authentication"> <a href="#511-adding-a-microsoft-365-organization-with-modern-authentication" class="anchor-heading" aria-labelledby="511-adding-a-microsoft-365-organization-with-modern-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.11. Adding a Microsoft 365 Organization with Modern Authentication </h3> <p>Use of Multi-Factor Authentication (MFA) is highly recommend. The following provides a step-through process to add a tenant and automatically enable Modern Authentication.</p> <p>VBO365 v4c (4.0.1.531) and later automates the creation/registration of Azure AD Apps in Microsoft 365 and grants the required permissions. This is accomplished through the VBO365 Console. For prior versions of VBO365;</p> <ul> <li>Adding tenants with Basic Authentication see <a href="#_9.1.1_Creating_a">Appendix Section 9.1</a> and skip this section.</li> <li>Adding tenants with Modern and Legacy Authentication see <a href="#_9.2.1_Enabling_Modern">Appendix Section 9.2</a> and skip this section.</li> </ul> <ol> <li> <p>Login to the VBO365 server and launch the application. Click on the Organizations tab in the lower left pane. Then right click on Organizations in the upper left pane and select Add Organization. For a pre-existing Microsoft 365 Organization, right click on it and click “Edit organization”.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.1_organization_deployment_type.png" alt="organization deployment type" /></p> <p>Confirm the options and click Next.</p> </li> <li> <p>Confirm the default Region and select Modern Authentication.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.2_office_authentication_method.png" alt="office authentication method" /></p> <p>Leave the “Allow for using legacy authentication protocols” checkbox unchecked. Click Next.</p> <p><strong>Note: If it is required to check legacy authentication checkbox, follow <em><a href="#_9.2.1_Enabling_Modern">_Appendix Section 9.2_</a></em>.</strong></p> </li> <li> <p>Select the “Register a new Azure AD application automatically” radial button.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.3_office_howto_connect.png" alt="office how to connect" /></p> <p>Click Next.</p> </li> <li> <p>Input a name for the VBO365 application in Azure. For this document, VBO365(4c) in Azure name is chosen as this is the first iteration of VBO365 that provides this functionality.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.4_Azure_app_register.png" alt="Azure app register" /></p> <p>To install a certificate, click Install…</p> </li> <li> <p>It is recommend to purchase a certificate from a certificate authority and import. For purposes of this document, a self-signed certificate will be generated.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.5_certificate_type.png" alt="Certificate type" /></p> <p>Upon import click Next.</p> </li> <li> <p>Confirm the Friendly name. For this document, the default self-signed name is used.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.6_certificate_generate.png" alt="certificate generate" /></p> <p>Click Finish.</p> </li> <li> <p>Confirm the Name and Certificate.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.7_Azure_AD_app_register.png" alt="Azure AD app register" /></p> <p>By default, web parts of Microsoft SharePoint sites that belong to Office 365 organization with enabled security defaults have the allowexport property set to false, which prevents Veeam Backup for Microsoft Office 365 from having a direct access to such web parts.</p> <p>If this check box is selected, Veeam Backup for Microsoft Office 365 automatically alters the allowexport property of each web part and sets this property to true. After the allowexport property is set to true, a web part can be backed up. Refer to the folloiwng link for more info; <a href="https://helpcenter.veeam.com/docs/vbo365/guide/register_ad_application.html?ver=40">Register Azure AD Application</a>.</p> <p>Per Release Notes, for organizations added using modern authentication with disabled legacy protocols, SharePoint Web Parts export mode can only be changed automatically if such type of a property is supported and can be modified in the source SharePoint Online site or OneDrive account.</p> <p>Click Next.</p> </li> <li> <p>Follow the instructions to sign in. Copy code and click the link to open the sign-page or provide the code to the tenant to login on the your (the service provider’s) behalf.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.8_Office_365_Logon.png" alt="Office 365 logon" /></p> <p>Paste the code and click Next.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.8-1_Office_365_Code.png" alt="Office 365 Code" /></p> </li> <li> <p>If more than 1 account is listed, choose the appropriate service account to login.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.9_Pick_Account.png" alt="pick account" /></p> </li> <li> <p>Enter the password.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.10_Enter_Password.png" alt="Enter password" /></p> <p>Click Sign in.</p> </li> <li> <p>You may be required to approve on an MFA device. If so, follow prompts. The result should be:</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.11_Azure_Command_Line.png" alt="Azure Command Line" /></p> <p>Close the window.</p> </li> <li> <p>A message should indicate authentication.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.12_Office_365_Logon.png" alt="office 365 logon" /></p> <p>Click Next.</p> <p>If these steps were completed per <em>Section 5.9</em>, click <a href="#DeviceAuthenticationCompleted">here</a> to go back.</p> </li> <li> <p>VBO365 will create the Azure AD application and configurations.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.11.13_Azure_app_config.png" alt="Azure app config" /></p> <p>Click Finish.</p> </li> </ol> <h3 id="512-managing-backup-azure-ad-applications-for-sharepointonedrive"> <a href="#512-managing-backup-azure-ad-applications-for-sharepointonedrive" class="anchor-heading" aria-labelledby="512-managing-backup-azure-ad-applications-for-sharepointonedrive"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.12. Managing Backup Azure AD Applications for SharePoint/OneDrive </h3> <p>When using Modern Authentication, backup accounts are not needed. Rather Azure AD Applications are used to access Microsoft 365 Data.</p> <p>To minimize throttling, VBO365 iterates through each added Azure AD Application to access Microsoft 365 resources and to fetch data from the organization. It is recommended to create additional AD Applications to minimize Microsoft throttling when backing up SharePoint and OneDrive and scale by 8 applications at a time. The following is a procedure on creating the Azure AD Applications via the VBO365 Console.</p> <ol> <li> <p>In the VBO365 Console, in Organizations right click on the tenant organization and select Manage backup applications.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.1_manage_backup_orgs.png" alt="Manage backup orgs" /></p> </li> <li> <p>Click on Create.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.2_backup_app_manager.png" alt="backup app manager" /></p> </li> <li> <p>Input a Name, install a certificate, and set the number of applicatoins to create. In this case, 8 instances of the Azure AD Application will be created with the same name and certificate.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.3_Azure_app_name_cert.png" alt="azure app name cert" /></p> <p>Click Next.</p> </li> <li> <p>Follow <a href="#DeviceAuthentication">Steps 8 – 12</a> in <em>Section 5.5</em>. The result should be similar to the following graphic.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.4_Office_365_logon.png" alt="office 365 logon" /></p> <p>Click Finish.</p> </li> <li> <p>Confirm completion of the AD App creation.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.5_AD_app_creation_confirm.png" alt="AD app creation confirm" /></p> <p>Click Ok.</p> </li> <li> <p>The folowing depicts the result in Azure AD.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.12.6_Azure_owned_apps_result.png" alt="Azure owned apps result" /></p> </li> </ol> <h3 id="513-create-a-tenant-object-storage-repository"> <a href="#513-create-a-tenant-object-storage-repository" class="anchor-heading" aria-labelledby="513-create-a-tenant-object-storage-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.13. Create a Tenant Object Storage Repository </h3> <ol> <li> <p>Click on Backup Infrastructure in the bottom left pane and then select on Object Storage Repositories. Click on Add Object Storage in the ribbon menu. Enter a name for the object storage repo. It is suggested to include the tenant name, retention, and backup type (item or snap) in the naming scheme.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.1_add_object_storage.png" alt="add object storage" /></p> <p>Click Next.</p> </li> <li> <p>Select Microsoft Azure Blob Storage.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.2_object_storage_type.png" alt="object storage type" /></p> <p>Click Next.</p> </li> <li> <p>Click Add to specify account credentials. Input the Account and Shared key information. Account is the “storage account name” and Shared key is “Key1” from the Azure portal, <em>Section 5.3 Step 12</em>.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.3_object_storage_credential.png" alt="object storage credential" /></p> <p>Click Ok.</p> </li> <li> <p>Maintain the default selection for the Regoin</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.4_object_storage_region.png" alt="object storage region" /></p> <p>Click Next.</p> </li> <li> <p>Confirm the selected Container. Click Browse and then New Folder to create a folder for the tenant. The suggested folder name should at least reflect retention and backup type (item or snap).</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.5_object_storage_folder.png" alt="object storage folder" /></p> <p>Click Ok and then Advanced.</p> </li> <li> <p>Depeding on teant purchased subscription, they me be allowed unlimited storage or have a finite amount of storage for their backups. Under Advanced, the limit can be configured. Check the “Limit object storage consumption to” checkbox and specify capacity. Then click Ok.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.6_object_storage_consumption_limit.png" alt="object storage consumption limit" /></p> <p>Based on assumptions in <em>Section 2.3.1</em>, 1000 users is expected to generate about 3.25 TB of backup data. When a change rate is known, the storage required can be predicted. For the purposes of this document, 4 TB is chosen. If the checkbox is left unchecked, the tenant will be allowed to go beyond the expected storage consumption.</p> <p>Service Provider business model typically dictates the selection of this option and billing is applied accordingly per business model.</p> <p>Click Ok.</p> </li> <li> <p>The final step in the wizard should look like the following.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.13.7_object_storage_blob_container.png" alt="object storage blob container" /></p> <p>Click Finish.</p> </li> </ol> <h3 id="514-configure-a-tenant-backup-repository"> <a href="#514-configure-a-tenant-backup-repository" class="anchor-heading" aria-labelledby="514-configure-a-tenant-backup-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.14. Configure a Tenant Backup Repository </h3> <p>This is the over-arching repository layer that encompasses/maps to the tenant object storage. It will hold metadata information and will serve as the targeting point for VBO365 jobs, which will relay data to the object storage.</p> <ol> <li> <p>Click on Backup Repositories in the Backup Infrastructure tab. Then click “Add Repository” in the ribbon menu at the top. Input a name. The name should reflect the name of the tenant and retention policy. You may wish to also include the type of repository in the name (item or snap).</p> <p><img src="/docs/vbo/blueprint_azure/images/5.14.1_new_backup_repository.png" alt="new backup repository" /></p> <p>Click Next.</p> </li> <li> <p>Confirm Backup Proxy and click Browse to browse a path. Click New Folder to create the tenant folder. It’s recommended the folder name include the tenant name, retention, and backup type (item or snap).</p> <p><img src="/docs/vbo/blueprint_azure/images/5.14.2_backup_proxy_path.png" alt="backup proxy path" /></p> <p>Click Ok and then Next.</p> </li> <li> <p>Check the Offload backup data to object storage” checkbox and select the tenant folder. Add or select a password if enabling encryption.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.14.3_extend_backup_to_storage.png" alt="extend backup to storage" /></p> <p>Click Next.</p> </li> <li> <p>Select a retention policy. In this case we will select 1 year. By default, the retention policy is applied at 12AM daily to check for expired emails under the Advanced configuration. This document focuses on Snapshot-Based retention and so that is what is selected.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.14.4_backup_retention_policy.png" alt="backup retention policy" /></p> <p>Click Finish.</p> </li> </ol> <p><strong>Note: For cost-efficiency, snapshot-based retention is recommended for object storage to minimize API cost for both backing up data and recovering data.</strong></p> <h3 id="515-create-a-backup-job"> <a href="#515-create-a-backup-job" class="anchor-heading" aria-labelledby="515-create-a-backup-job"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.15. Create a Backup Job </h3> <ol> <li> <p>Right click on the organization and click Add to backup job. Specify a job name and description. The suggested name should include the tenant name, retention, backup type, and perhaps application type if jobs are being segregated by that category (Exchange, Sharepoint, Onedrive).</p> <p><img src="/docs/vbo/blueprint_azure/images/5.15.1_new_backup_job.png" alt="new backup job" /></p> <p>Click Next.</p> </li> <li> <p>If selecting “Backup up the following objects”, click Add to select a more custom approach.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.15.2_select_objects.png" alt="select objects" /></p> <p>This document assumes a Backup of the entire organization is selected. Click Next.</p> </li> <li> <p>Objects can be excluded.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.15.3_exclude_objects.png" alt="exclude objects" /></p> <p>Click Next.</p> </li> <li> <p>Confirm and specify the backup repository.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.15.4_backup_proxy_repository.png" alt="backup proxy repository" /></p> <p>Click Next.</p> </li> <li> <p>Confirm scheduling selections.</p> <p><img src="/docs/vbo/blueprint_azure/images/5.15.5_scheduling_options.png" alt="scheduling options" /></p> <p>Click Create and Run the job. Congratulations! You’ve completed the deployment of VBO in Azure and have created the 1st job!</p> </li> </ol> <h4 id="5151-recommended-job-practice-notes"> <a href="#5151-recommended-job-practice-notes" class="anchor-heading" aria-labelledby="5151-recommended-job-practice-notes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.15.1. Recommended Job Practice Notes </h4> <ul> <li>Jobs should not contain more than 2000 objects, which is equivalent to about 750 users based on previously defined assumptions. Jobs can be divided by application to meet this recommendation. <ul> <li>To reduce the number of objects being backed up on a per job basis, for ease of management, and to separate how processing is done (Mailbox vs SharePoint/OneDrive), create separate jobs based on application items such as Exchange, OneDrive, and SharePoint.</li> </ul> </li> <li>Only 1 bucket/container is technically required with tenant folders mapping to each tenant repository. However, the recommendation is to create a bucket/container per tenant and retention folders underneath.</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
